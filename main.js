/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  enabled: false,
  maskMode: "blur",
  revealMode: "word",
  excludeHeaders: true,
  revealSelection: true
};
var SampleSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Enable text hider").setDesc("Turn masking on/off. For optimal use, set a hotkey for the Toggle command. You can also bind hotkeys for Enable/Disable. All commands are also available from the Command Palette.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enabled).onChange(async (value) => {
        this.plugin.settings.enabled = value;
        await this.plugin.saveSettings();
        this.plugin.notifySettingsChanged();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Masking & reveal").setHeading();
    new import_obsidian.Setting(containerEl).setName("Mask mode").setDesc("How hidden text is shown (Hide is cleanest, Blur is softer, Password may vary by theme).").addDropdown((dd) => {
      dd.addOption("hide", "Hide");
      dd.addOption("blur", "Blur");
      dd.addOption("password", "Password");
      dd.setValue(this.plugin.settings.maskMode);
      dd.onChange(async (value) => {
        this.plugin.settings.maskMode = value;
        await this.plugin.saveSettings();
        this.plugin.notifySettingsChanged();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Reveal mode").setDesc("What stays readable at the cursor.").addDropdown((dd) => {
      dd.addOption("word", "Current word");
      dd.addOption("letter", "Current letter");
      dd.setValue(this.plugin.settings.revealMode);
      dd.onChange(async (value) => {
        this.plugin.settings.revealMode = value;
        await this.plugin.saveSettings();
        this.plugin.notifySettingsChanged();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Exceptions & behavior").setHeading();
    new import_obsidian.Setting(containerEl).setName("Exclude headers").setDesc("Keep Markdown headers (#, ##, ###) visible.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.excludeHeaders).onChange(async (value) => {
        this.plugin.settings.excludeHeaders = value;
        await this.plugin.saveSettings();
        this.plugin.notifySettingsChanged();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Reveal selected text").setDesc("Selected text becomes visible while selected.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.revealSelection).onChange(async (value) => {
        this.plugin.settings.revealSelection = value;
        await this.plugin.saveSettings();
        this.plugin.notifySettingsChanged();
      })
    );
  }
};

// src/privacy/PrivacyController.ts
var import_obsidian2 = require("obsidian");
var import_state = require("@codemirror/state");

// src/privacy/cm6/PrivacyExtension.ts
var import_view2 = require("@codemirror/view");

// src/privacy/cm6/masking/buildMaskDecorations.ts
var import_view = require("@codemirror/view");

// src/privacy/cm6/masking/ranges.ts
function mergeRanges(ranges) {
  const sorted = ranges.filter((r) => r.to > r.from).slice().sort((a, b) => a.from - b.from || a.to - b.to);
  const merged = [];
  for (const r of sorted) {
    const last = merged[merged.length - 1];
    if (!last || r.from > last.to) merged.push({ ...r });
    else last.to = Math.max(last.to, r.to);
  }
  return merged;
}
function subtractRanges(base, subtract) {
  const b = mergeRanges(base);
  const s = mergeRanges(subtract);
  const out = [];
  for (const br of b) {
    let cursor = br.from;
    for (const sr of s) {
      if (sr.to <= cursor) continue;
      if (sr.from >= br.to) break;
      const start = Math.max(cursor, br.from);
      const end = Math.min(sr.from, br.to);
      if (end > start) out.push({ from: start, to: end });
      cursor = Math.max(cursor, sr.to);
      if (cursor >= br.to) break;
    }
    if (cursor < br.to) out.push({ from: cursor, to: br.to });
  }
  return out;
}
function computeRevealRanges(state, revealMode) {
  const pos = state.selection.main.head;
  if (revealMode === "letter") {
    if (pos < state.doc.length) return [{ from: pos, to: pos + 1 }];
    if (pos > 0) return [{ from: pos - 1, to: pos }];
    return [];
  }
  const line = state.doc.lineAt(pos);
  const idx = pos - line.from;
  const isWordChar = (ch) => /[A-Za-z0-9_]/.test(ch);
  let left = idx;
  while (left > 0 && isWordChar(line.text.charAt(left - 1))) left--;
  let right = idx;
  while (right < line.text.length && isWordChar(line.text.charAt(right))) right++;
  if (right <= left) {
    return [];
  }
  return [{ from: line.from + left, to: line.from + right }];
}

// src/privacy/cm6/masking/headers.ts
function isHeaderLine(lineText) {
  return /^\s{0,3}#{1,6}\s/.test(lineText);
}

// src/privacy/cm6/masking/buildMaskDecorations.ts
function buildMaskDecorations(view, enabled, settings) {
  if (!enabled) return import_view.Decoration.none;
  const builder = new class {
    constructor() {
      this.decos = [];
    }
    add(from, to, deco) {
      this.decos.push({ from, to, deco });
    }
    finish() {
      return import_view.Decoration.set(this.decos.map((d) => d.deco.range(d.from, d.to)), true);
    }
  }();
  const state = view.state;
  const cursorReveal = computeRevealRanges(state, settings.revealMode);
  const selectionReveal = settings.revealSelection ? state.selection.ranges.filter((r) => !r.empty).map((r) => ({ from: Math.min(r.from, r.to), to: Math.max(r.from, r.to) })) : [];
  const revealRanges = mergeRanges([...cursorReveal, ...selectionReveal]);
  for (const vr of view.visibleRanges) {
    let pos = vr.from;
    while (pos <= vr.to) {
      const line = state.doc.lineAt(pos);
      if (line.from > vr.to) break;
      const excludeThisLine = settings.excludeHeaders && isHeaderLine(line.text);
      if (!excludeThisLine) {
        const lineRange = { from: line.from, to: line.to };
        const revealInLine = revealRanges.filter((r) => r.to > lineRange.from && r.from < lineRange.to).map((r) => ({
          from: Math.max(r.from, lineRange.from),
          to: Math.min(r.to, lineRange.to)
        }));
        const maskSegments = subtractRanges([lineRange], revealInLine);
        for (const seg of maskSegments) {
          if (seg.to <= seg.from) continue;
          const length = seg.to - seg.from;
          const cls = settings.maskMode === "hide" ? "privacy-mask-hide" : settings.maskMode === "password" ? "privacy-mask-password" : "privacy-mask-blur";
          builder.add(seg.from, seg.to, import_view.Decoration.mark({ class: cls }));
        }
      }
      pos = line.to + 1;
      if (pos === line.from) break;
    }
  }
  return builder.finish();
}

// src/privacy/cm6/PrivacyExtension.ts
function buildPrivacyExtension(args) {
  const { enabled, settings } = args;
  const editorAttrs = import_view2.EditorView.editorAttributes.of({
    class: enabled ? "privacy-mode-enabled" : ""
  });
  const plugin = import_view2.ViewPlugin.fromClass(
    class PrivacyMaskPlugin {
      constructor(view) {
        this.decorations = buildMaskDecorations(view, enabled, settings);
      }
      update(update) {
        if (!enabled) {
          this.decorations = import_view2.Decoration.none;
          return;
        }
        if (update.docChanged || update.selectionSet || update.viewportChanged) {
          this.decorations = buildMaskDecorations(update.view, enabled, settings);
        }
      }
    },
    { decorations: (v) => v.decorations }
  );
  return [editorAttrs, plugin];
}

// src/privacy/PrivacyController.ts
var PrivacyController = class {
  constructor(plugin) {
    this.compartment = new import_state.Compartment();
    this.plugin = plugin;
    this.enabled = plugin.settings.enabled;
    this.baseExtension = this.compartment.of(
      buildPrivacyExtension({
        enabled: this.enabled,
        settings: this.plugin.settings
      })
    );
    this.plugin.registerEditorExtension(this.baseExtension);
    const off1 = this.plugin.app.workspace.on("active-leaf-change", () => this.apply("settings-change"));
    const off2 = this.plugin.app.workspace.on("layout-change", () => this.apply("settings-change"));
    this.plugin.register(() => this.plugin.app.workspace.offref(off1));
    this.plugin.register(() => this.plugin.app.workspace.offref(off2));
  }
  syncFromSettings(opts) {
    this.enabled = this.plugin.settings.enabled;
    this.apply(opts.reason);
  }
  toggleEnabled() {
    this.setEnabled(!this.enabled);
  }
  setEnabled(next) {
    if (this.enabled === next) return;
    this.enabled = next;
    this.plugin.settings.enabled = next;
    void this.plugin.saveSettings();
    this.apply("command");
  }
  onSettingsChanged() {
    this.apply("settings-change");
  }
  apply(_reason) {
    const ext = buildPrivacyExtension({
      enabled: this.enabled,
      settings: this.plugin.settings
    });
    const effect = this.compartment.reconfigure(ext);
    for (const view of this.getAllMarkdownEditorViews()) {
      const cm = this.getEditorView(view);
      if (!cm) continue;
      cm.dispatch({ effects: effect });
    }
  }
  *getAllMarkdownEditorViews() {
    const leaves = this.plugin.app.workspace.getLeavesOfType("markdown");
    for (const leaf of leaves) {
      const view = leaf.view;
      if (view instanceof import_obsidian2.MarkdownView) yield view;
    }
  }
  /**
   * Obsidian's Editor is wrapped; in CM6 it usually exposes `.cm` as EditorView.
   * This is the common plugin pattern.
   */
  getEditorView(view) {
    const editorAny = view.editor;
    const cm = editorAny == null ? void 0 : editorAny.cm;
    return cm != null ? cm : null;
  }
};

// src/main.ts
var MyPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    await this.loadSettings();
    this.privacy = new PrivacyController(this);
    this.addSettingTab(new SampleSettingTab(this.app, this));
    this.registerCommands();
    this.privacy.syncFromSettings({ reason: "startup" });
  }
  registerCommands() {
    this.addCommand({
      id: "toggle-privacy-mode",
      name: "Toggle privacy mode",
      callback: () => this.privacy.toggleEnabled()
    });
    this.addCommand({
      id: "enable-privacy-mode",
      name: "Enable privacy mode",
      callback: () => this.privacy.setEnabled(true)
    });
    this.addCommand({
      id: "disable-privacy-mode",
      name: "Disable privacy mode",
      callback: () => this.privacy.setEnabled(false)
    });
  }
  notifySettingsChanged() {
    this.privacy.onSettingsChanged();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9wcml2YWN5L1ByaXZhY3lDb250cm9sbGVyLnRzIiwgInNyYy9wcml2YWN5L2NtNi9Qcml2YWN5RXh0ZW5zaW9uLnRzIiwgInNyYy9wcml2YWN5L2NtNi9tYXNraW5nL2J1aWxkTWFza0RlY29yYXRpb25zLnRzIiwgInNyYy9wcml2YWN5L2NtNi9tYXNraW5nL3Jhbmdlcy50cyIsICJzcmMvcHJpdmFjeS9jbTYvbWFza2luZy9oZWFkZXJzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4sIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgREVGQVVMVF9TRVRUSU5HUywgTXlQbHVnaW5TZXR0aW5ncywgU2FtcGxlU2V0dGluZ1RhYiB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5pbXBvcnQgeyBQcml2YWN5Q29udHJvbGxlciB9IGZyb20gXCIuL3ByaXZhY3kvUHJpdmFjeUNvbnRyb2xsZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5ncyE6IE15UGx1Z2luU2V0dGluZ3M7XG4gIHByaXZhdGUgcHJpdmFjeSE6IFByaXZhY3lDb250cm9sbGVyO1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgdGhpcy5wcml2YWN5ID0gbmV3IFByaXZhY3lDb250cm9sbGVyKHRoaXMpO1xuXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTYW1wbGVTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gICAgdGhpcy5yZWdpc3RlckNvbW1hbmRzKCk7XG5cbiAgICAvLyBJbml0aWFsaXplIHJ1bnRpbWUgZnJvbSBwZXJzaXN0ZWQgc2V0dGluZ3NcbiAgICB0aGlzLnByaXZhY3kuc3luY0Zyb21TZXR0aW5ncyh7IHJlYXNvbjogXCJzdGFydHVwXCIgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlZ2lzdGVyQ29tbWFuZHMoKSB7XG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcInRvZ2dsZS1wcml2YWN5LW1vZGVcIixcbiAgICAgIG5hbWU6IFwiVG9nZ2xlIHByaXZhY3kgbW9kZVwiLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMucHJpdmFjeS50b2dnbGVFbmFibGVkKCksXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwiZW5hYmxlLXByaXZhY3ktbW9kZVwiLFxuICAgICAgbmFtZTogXCJFbmFibGUgcHJpdmFjeSBtb2RlXCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5wcml2YWN5LnNldEVuYWJsZWQodHJ1ZSksXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwiZGlzYWJsZS1wcml2YWN5LW1vZGVcIixcbiAgICAgIG5hbWU6IFwiRGlzYWJsZSBwcml2YWN5IG1vZGVcIixcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnByaXZhY3kuc2V0RW5hYmxlZChmYWxzZSksXG4gICAgfSk7XG4gIH1cblxuICBub3RpZnlTZXR0aW5nc0NoYW5nZWQoKSB7XG4gICAgdGhpcy5wcml2YWN5Lm9uU2V0dGluZ3NDaGFuZ2VkKCk7XG4gIH0gIFxuXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgKGF3YWl0IHRoaXMubG9hZERhdGEoKSkgYXMgUGFydGlhbDxNeVBsdWdpblNldHRpbmdzPik7XG4gIH1cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IE15UGx1Z2luIGZyb20gXCIuL21haW5cIjtcblxuZXhwb3J0IHR5cGUgTWFza01vZGUgPSBcImhpZGVcIiB8IFwicGFzc3dvcmRcIiB8IFwiYmx1clwiO1xuZXhwb3J0IHR5cGUgUmV2ZWFsTW9kZSA9IFwid29yZFwiIHwgXCJsZXR0ZXJcIjtcblxuZXhwb3J0IGludGVyZmFjZSBNeVBsdWdpblNldHRpbmdzIHtcblx0LyoqIFBlcnNpc3RlZCBnbG9iYWwgZGVmYXVsdCBzdGF0ZSAqL1xuXHRlbmFibGVkOiBib29sZWFuO1xuXG5cdC8qKiBIb3cgdG8gbWFzayBub24tcmV2ZWFsZWQgdGV4dCAqL1xuXHRtYXNrTW9kZTogTWFza01vZGU7XG5cblx0LyoqIFdoYXQgdG8gcmV2ZWFsIGF0IHRoZSBjdXJzb3IgKi9cblx0cmV2ZWFsTW9kZTogUmV2ZWFsTW9kZTtcblxuXHQvKiogS2VlcCBNYXJrZG93biBoZWFkZXJzIHZpc2libGUgKCMsICMjLCBldGMuKSAqL1xuXHRleGNsdWRlSGVhZGVyczogYm9vbGVhbjtcblxuXHQvKiogSWYgZW5hYmxlZCwgc2VsZWN0aW9uIGJlY29tZXMgdmlzaWJsZSB3aGlsZSBzZWxlY3RlZCAqL1xuXHRyZXZlYWxTZWxlY3Rpb246IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeVBsdWdpblNldHRpbmdzID0ge1xuXHRlbmFibGVkOiBmYWxzZSxcblx0bWFza01vZGU6IFwiYmx1clwiLFxuXHRyZXZlYWxNb2RlOiBcIndvcmRcIixcblx0ZXhjbHVkZUhlYWRlcnM6IHRydWUsXG5cdHJldmVhbFNlbGVjdGlvbjogdHJ1ZSxcbn07XG5cbmV4cG9ydCBjbGFzcyBTYW1wbGVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogTXlQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuZGlzcGxheSgpOiB2b2lkIHtcblx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHQvLyAtLS0gR2xvYmFsIFRvZ2dsZSAoaGVhZGluZyByb3cpIC0tLVxuXHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHQuc2V0TmFtZShcIkVuYWJsZSB0ZXh0IGhpZGVyXCIpXG5cdFx0LnNldERlc2MoXCJUdXJuIG1hc2tpbmcgb24vb2ZmLiBGb3Igb3B0aW1hbCB1c2UsIHNldCBhIGhvdGtleSBmb3IgdGhlIFRvZ2dsZSBjb21tYW5kLiBZb3UgY2FuIGFsc28gYmluZCBob3RrZXlzIGZvciBFbmFibGUvRGlzYWJsZS4gQWxsIGNvbW1hbmRzIGFyZSBhbHNvIGF2YWlsYWJsZSBmcm9tIHRoZSBDb21tYW5kIFBhbGV0dGUuXCIpXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZWQpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVkID0gdmFsdWU7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5ub3RpZnlTZXR0aW5nc0NoYW5nZWQoKTtcblx0XHRcdH0pXG5cdFx0KTtcblxuXHQvLyBTdWJzZWN0aW9uOiBNYXNraW5nICYgUmV2ZWFsXG5cdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiTWFza2luZyAmIHJldmVhbFwiKS5zZXRIZWFkaW5nKCk7XG5cblx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0LnNldE5hbWUoXCJNYXNrIG1vZGVcIilcblx0XHQuc2V0RGVzYyhcIkhvdyBoaWRkZW4gdGV4dCBpcyBzaG93biAoSGlkZSBpcyBjbGVhbmVzdCwgQmx1ciBpcyBzb2Z0ZXIsIFBhc3N3b3JkIG1heSB2YXJ5IGJ5IHRoZW1lKS5cIilcblx0XHQuYWRkRHJvcGRvd24oKGRkKSA9PiB7XG5cdFx0XHRkZC5hZGRPcHRpb24oXCJoaWRlXCIsIFwiSGlkZVwiKTtcblx0XHRcdGRkLmFkZE9wdGlvbihcImJsdXJcIiwgXCJCbHVyXCIpO1xuXHRcdFx0ZGQuYWRkT3B0aW9uKFwicGFzc3dvcmRcIiwgXCJQYXNzd29yZFwiKTtcblx0XHRcdGRkLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1hc2tNb2RlKTtcblx0XHRcdGRkLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXNrTW9kZSA9IHZhbHVlIGFzIE1hc2tNb2RlO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0dGhpcy5wbHVnaW4ubm90aWZ5U2V0dGluZ3NDaGFuZ2VkKCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHQuc2V0TmFtZShcIlJldmVhbCBtb2RlXCIpXG5cdFx0LnNldERlc2MoXCJXaGF0IHN0YXlzIHJlYWRhYmxlIGF0IHRoZSBjdXJzb3IuXCIpXG5cdFx0LmFkZERyb3Bkb3duKChkZCkgPT4ge1xuXHRcdFx0ZGQuYWRkT3B0aW9uKFwid29yZFwiLCBcIkN1cnJlbnQgd29yZFwiKTtcblx0XHRcdGRkLmFkZE9wdGlvbihcImxldHRlclwiLCBcIkN1cnJlbnQgbGV0dGVyXCIpO1xuXHRcdFx0ZGQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2ZWFsTW9kZSk7XG5cdFx0XHRkZC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2ZWFsTW9kZSA9IHZhbHVlIGFzIFJldmVhbE1vZGU7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5ub3RpZnlTZXR0aW5nc0NoYW5nZWQoKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdC8vIFN1YnNlY3Rpb246IEV4Y2VwdGlvbnMgJiBiZWhhdmlvclxuXHRuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkV4Y2VwdGlvbnMgJiBiZWhhdmlvclwiKS5zZXRIZWFkaW5nKCk7XG5cblx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0LnNldE5hbWUoXCJFeGNsdWRlIGhlYWRlcnNcIilcblx0XHQuc2V0RGVzYyhcIktlZXAgTWFya2Rvd24gaGVhZGVycyAoIywgIyMsICMjIykgdmlzaWJsZS5cIilcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUhlYWRlcnMpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5leGNsdWRlSGVhZGVycyA9IHZhbHVlO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0dGhpcy5wbHVnaW4ubm90aWZ5U2V0dGluZ3NDaGFuZ2VkKCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0LnNldE5hbWUoXCJSZXZlYWwgc2VsZWN0ZWQgdGV4dFwiKVxuXHRcdC5zZXREZXNjKFwiU2VsZWN0ZWQgdGV4dCBiZWNvbWVzIHZpc2libGUgd2hpbGUgc2VsZWN0ZWQuXCIpXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJldmVhbFNlbGVjdGlvbikub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJldmVhbFNlbGVjdGlvbiA9IHZhbHVlO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0dGhpcy5wbHVnaW4ubm90aWZ5U2V0dGluZ3NDaGFuZ2VkKCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cdH1cbn1cbiIsICJpbXBvcnQgdHlwZSBNeVBsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xyXG5pbXBvcnQgeyBNYXJrZG93blZpZXcgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgQ29tcGFydG1lbnQsIHR5cGUgRXh0ZW5zaW9uIH0gZnJvbSBcIkBjb2RlbWlycm9yL3N0YXRlXCI7XHJcbmltcG9ydCB0eXBlIHsgRWRpdG9yVmlldyB9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCI7XHJcbmltcG9ydCB7IGJ1aWxkUHJpdmFjeUV4dGVuc2lvbiB9IGZyb20gXCIuL2NtNi9Qcml2YWN5RXh0ZW5zaW9uXCI7XHJcblxyXG50eXBlIEFwcGx5UmVhc29uID0gXCJzdGFydHVwXCIgfCBcImNvbW1hbmRcIiB8IFwic2V0dGluZ3MtY2hhbmdlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJpdmFjeUNvbnRyb2xsZXIge1xyXG4gIHByaXZhdGUgcGx1Z2luOiBNeVBsdWdpbjtcclxuXHJcbiAgcHJpdmF0ZSBlbmFibGVkOiBib29sZWFuO1xyXG5cclxuICBwcml2YXRlIGNvbXBhcnRtZW50ID0gbmV3IENvbXBhcnRtZW50KCk7XHJcbiAgcHJpdmF0ZSBiYXNlRXh0ZW5zaW9uOiBFeHRlbnNpb247XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogTXlQbHVnaW4pIHtcclxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgdGhpcy5lbmFibGVkID0gcGx1Z2luLnNldHRpbmdzLmVuYWJsZWQ7XHJcblxyXG4gICAgLy8gUmVnaXN0ZXIgT05FIGVkaXRvciBleHRlbnNpb24sIGFuZCByZWNvbmZpZ3VyZSBpdCB2aWEgYSBDb21wYXJ0bWVudC5cclxuICAgIHRoaXMuYmFzZUV4dGVuc2lvbiA9IHRoaXMuY29tcGFydG1lbnQub2YoXHJcbiAgICAgIGJ1aWxkUHJpdmFjeUV4dGVuc2lvbih7XHJcbiAgICAgICAgZW5hYmxlZDogdGhpcy5lbmFibGVkLFxyXG4gICAgICAgIHNldHRpbmdzOiB0aGlzLnBsdWdpbi5zZXR0aW5ncyxcclxuICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFZGl0b3JFeHRlbnNpb24odGhpcy5iYXNlRXh0ZW5zaW9uKTtcclxuXHJcbiAgICAvLyBSZS1hcHBseSB3aGVuIHN3aXRjaGluZyBwYW5lcy9ub3Rlc1xyXG4gICAgY29uc3Qgb2ZmMSA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXCJhY3RpdmUtbGVhZi1jaGFuZ2VcIiwgKCkgPT4gdGhpcy5hcHBseShcInNldHRpbmdzLWNoYW5nZVwiKSk7XHJcbiAgICBjb25zdCBvZmYyID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcImxheW91dC1jaGFuZ2VcIiwgKCkgPT4gdGhpcy5hcHBseShcInNldHRpbmdzLWNoYW5nZVwiKSk7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlcigoKSA9PiB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9mZnJlZihvZmYxKSk7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlcigoKSA9PiB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9mZnJlZihvZmYyKSk7XHJcbiAgfVxyXG5cclxuICBzeW5jRnJvbVNldHRpbmdzKG9wdHM6IHsgcmVhc29uOiBBcHBseVJlYXNvbiB9KSB7XHJcbiAgICB0aGlzLmVuYWJsZWQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVkO1xyXG4gICAgdGhpcy5hcHBseShvcHRzLnJlYXNvbik7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVFbmFibGVkKCkge1xyXG4gICAgdGhpcy5zZXRFbmFibGVkKCF0aGlzLmVuYWJsZWQpO1xyXG4gIH1cclxuXHJcbiAgc2V0RW5hYmxlZChuZXh0OiBib29sZWFuKSB7XHJcbiAgICBpZiAodGhpcy5lbmFibGVkID09PSBuZXh0KSByZXR1cm47XHJcblxyXG4gICAgdGhpcy5lbmFibGVkID0gbmV4dDtcclxuICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZWQgPSBuZXh0O1xyXG4gICAgdm9pZCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHJcbiAgICB0aGlzLmFwcGx5KFwiY29tbWFuZFwiKTtcclxuICB9XHJcblxyXG4gIG9uU2V0dGluZ3NDaGFuZ2VkKCkge1xyXG4gICAgLy8gU2V0dGluZ3MgdGFiIHNhdmVkIHNvbWV0aGluZyBcdTIwMTQgcHVzaCB1cGRhdGVkIGNvbmZpZ1xyXG4gICAgdGhpcy5hcHBseShcInNldHRpbmdzLWNoYW5nZVwiKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXBwbHkoX3JlYXNvbjogQXBwbHlSZWFzb24pIHtcclxuICAgIC8vIFJlY29uZmlndXJlIGV2ZXJ5IGFjdGl2ZSBDTTYgZWRpdG9yIHZpZXdcclxuICAgIGNvbnN0IGV4dCA9IGJ1aWxkUHJpdmFjeUV4dGVuc2lvbih7XHJcbiAgICAgIGVuYWJsZWQ6IHRoaXMuZW5hYmxlZCxcclxuICAgICAgc2V0dGluZ3M6IHRoaXMucGx1Z2luLnNldHRpbmdzLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgZWZmZWN0ID0gdGhpcy5jb21wYXJ0bWVudC5yZWNvbmZpZ3VyZShleHQpO1xyXG5cclxuICAgIGZvciAoY29uc3QgdmlldyBvZiB0aGlzLmdldEFsbE1hcmtkb3duRWRpdG9yVmlld3MoKSkge1xyXG4gICAgICBjb25zdCBjbSA9IHRoaXMuZ2V0RWRpdG9yVmlldyh2aWV3KTtcclxuICAgICAgaWYgKCFjbSkgY29udGludWU7XHJcbiAgICAgIGNtLmRpc3BhdGNoKHsgZWZmZWN0czogZWZmZWN0IH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSAqZ2V0QWxsTWFya2Rvd25FZGl0b3JWaWV3cygpOiBJdGVyYWJsZTxNYXJrZG93blZpZXc+IHtcclxuICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwibWFya2Rvd25cIik7XHJcbiAgICBmb3IgKGNvbnN0IGxlYWYgb2YgbGVhdmVzKSB7XHJcbiAgICAgIGNvbnN0IHZpZXcgPSBsZWFmLnZpZXc7XHJcbiAgICAgIGlmICh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB5aWVsZCB2aWV3O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT2JzaWRpYW4ncyBFZGl0b3IgaXMgd3JhcHBlZDsgaW4gQ002IGl0IHVzdWFsbHkgZXhwb3NlcyBgLmNtYCBhcyBFZGl0b3JWaWV3LlxyXG4gICAqIFRoaXMgaXMgdGhlIGNvbW1vbiBwbHVnaW4gcGF0dGVybi5cclxuICAgKi9cclxuICBwcml2YXRlIGdldEVkaXRvclZpZXcodmlldzogTWFya2Rvd25WaWV3KTogRWRpdG9yVmlldyB8IG51bGwge1xyXG4gICAgY29uc3QgZWRpdG9yQW55ID0gdmlldy5lZGl0b3IgYXMgYW55O1xyXG4gICAgY29uc3QgY20gPSBlZGl0b3JBbnk/LmNtO1xyXG4gICAgcmV0dXJuIGNtID8/IG51bGw7XHJcbiAgfVxyXG59XHJcbiIsICJpbXBvcnQgdHlwZSB7IEV4dGVuc2lvbiB9IGZyb20gXCJAY29kZW1pcnJvci9zdGF0ZVwiO1xyXG5pbXBvcnQgeyBFZGl0b3JWaWV3LCBWaWV3UGx1Z2luLCBEZWNvcmF0aW9uLCB0eXBlIERlY29yYXRpb25TZXQsIHR5cGUgVmlld1VwZGF0ZSB9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCI7XHJcbmltcG9ydCB0eXBlIHsgTXlQbHVnaW5TZXR0aW5ncyB9IGZyb20gXCIuLi8uLi9zZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBidWlsZE1hc2tEZWNvcmF0aW9ucyB9IGZyb20gXCIuL21hc2tpbmcvYnVpbGRNYXNrRGVjb3JhdGlvbnNcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBidWlsZFByaXZhY3lFeHRlbnNpb24oYXJnczogeyBlbmFibGVkOiBib29sZWFuOyBzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncyB9KTogRXh0ZW5zaW9uIHtcclxuICBjb25zdCB7IGVuYWJsZWQsIHNldHRpbmdzIH0gPSBhcmdzO1xyXG5cclxuICBjb25zdCBlZGl0b3JBdHRycyA9IEVkaXRvclZpZXcuZWRpdG9yQXR0cmlidXRlcy5vZih7XHJcbiAgICBjbGFzczogZW5hYmxlZCA/IFwicHJpdmFjeS1tb2RlLWVuYWJsZWRcIiA6IFwiXCIsXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHBsdWdpbiA9IFZpZXdQbHVnaW4uZnJvbUNsYXNzKFxyXG4gICAgY2xhc3MgUHJpdmFjeU1hc2tQbHVnaW4ge1xyXG4gICAgICBkZWNvcmF0aW9uczogRGVjb3JhdGlvblNldDtcclxuXHJcbiAgICAgIGNvbnN0cnVjdG9yKHZpZXc6IEVkaXRvclZpZXcpIHtcclxuICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gYnVpbGRNYXNrRGVjb3JhdGlvbnModmlldywgZW5hYmxlZCwgc2V0dGluZ3MpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB1cGRhdGUodXBkYXRlOiBWaWV3VXBkYXRlKSB7XHJcbiAgICAgICAgaWYgKCFlbmFibGVkKSB7XHJcbiAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gRGVjb3JhdGlvbi5ub25lO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodXBkYXRlLmRvY0NoYW5nZWQgfHwgdXBkYXRlLnNlbGVjdGlvblNldCB8fCB1cGRhdGUudmlld3BvcnRDaGFuZ2VkKSB7XHJcbiAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gYnVpbGRNYXNrRGVjb3JhdGlvbnModXBkYXRlLnZpZXcsIGVuYWJsZWQsIHNldHRpbmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7IGRlY29yYXRpb25zOiAodikgPT4gdi5kZWNvcmF0aW9ucyB9XHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIFtlZGl0b3JBdHRycywgcGx1Z2luXTtcclxufVxyXG4iLCAiaW1wb3J0IHR5cGUgeyBFZGl0b3JWaWV3IH0gZnJvbSBcIkBjb2RlbWlycm9yL3ZpZXdcIjtcclxuaW1wb3J0IHsgRGVjb3JhdGlvbiB9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCI7XHJcbmltcG9ydCB0eXBlIHsgTXlQbHVnaW5TZXR0aW5ncyB9IGZyb20gXCIuLi8uLi8uLi9zZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBjb21wdXRlUmV2ZWFsUmFuZ2VzLCBzdWJ0cmFjdFJhbmdlcywgbWVyZ2VSYW5nZXMsIHR5cGUgUmFuZ2UgfSBmcm9tIFwiLi9yYW5nZXNcIjtcclxuaW1wb3J0IHsgaXNIZWFkZXJMaW5lIH0gZnJvbSBcIi4vaGVhZGVyc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTWFza0RlY29yYXRpb25zKHZpZXc6IEVkaXRvclZpZXcsIGVuYWJsZWQ6IGJvb2xlYW4sIHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzKSB7XHJcbiAgaWYgKCFlbmFibGVkKSByZXR1cm4gRGVjb3JhdGlvbi5ub25lO1xyXG5cclxuICBjb25zdCBidWlsZGVyID0gbmV3IChjbGFzcyB7XHJcbiAgICBkZWNvczogeyBmcm9tOiBudW1iZXI7IHRvOiBudW1iZXI7IGRlY286IGFueSB9W10gPSBbXTtcclxuICAgIGFkZChmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIsIGRlY286IGFueSkge1xyXG4gICAgICB0aGlzLmRlY29zLnB1c2goeyBmcm9tLCB0bywgZGVjbyB9KTtcclxuICAgIH1cclxuICAgIGZpbmlzaCgpIHtcclxuICAgICAgLy8gQGNvZGVtaXJyb3IvdmlldyBleHBlY3RzIFJhbmdlPERlY29yYXRpb24+OyBPYnNpZGlhbiBidW5kbGVzIFJhbmdlU2V0QnVpbGRlcixcclxuICAgICAgLy8gYnV0IGEgc2ltcGxlIGJ1aWxkIHdvcmtzIHZpYSBEZWNvcmF0aW9uLnNldChbLi4uXSkgdG9vLlxyXG4gICAgICByZXR1cm4gRGVjb3JhdGlvbi5zZXQodGhpcy5kZWNvcy5tYXAoKGQpID0+IGQuZGVjby5yYW5nZShkLmZyb20sIGQudG8pKSwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgfSkoKTtcclxuXHJcbiAgY29uc3Qgc3RhdGUgPSB2aWV3LnN0YXRlO1xyXG5cclxuICAvLyAxKSBDb21wdXRlIHJldmVhbCByYW5nZXMgKGN1cnNvciBsZXR0ZXIvd29yZC9ub25lKVxyXG4gIGNvbnN0IGN1cnNvclJldmVhbCA9IGNvbXB1dGVSZXZlYWxSYW5nZXMoc3RhdGUsIHNldHRpbmdzLnJldmVhbE1vZGUpO1xyXG5cclxuICAvLyAyKSBDb21wdXRlIHNlbGVjdGlvbiByZXZlYWwgcmFuZ2VzIChpZiBlbmFibGVkKVxyXG4gIGNvbnN0IHNlbGVjdGlvblJldmVhbDogUmFuZ2VbXSA9IHNldHRpbmdzLnJldmVhbFNlbGVjdGlvblxyXG4gICAgPyBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzXHJcbiAgICAgICAgLmZpbHRlcigocikgPT4gIXIuZW1wdHkpXHJcbiAgICAgICAgLm1hcCgocikgPT4gKHsgZnJvbTogTWF0aC5taW4oci5mcm9tLCByLnRvKSwgdG86IE1hdGgubWF4KHIuZnJvbSwgci50bykgfSkpXHJcbiAgICA6IFtdO1xyXG5cclxuXHJcbiAgY29uc3QgcmV2ZWFsUmFuZ2VzID0gbWVyZ2VSYW5nZXMoWy4uLmN1cnNvclJldmVhbCwgLi4uc2VsZWN0aW9uUmV2ZWFsXSk7XHJcblxyXG4gIC8vIDMpIEJ1aWxkIG1hc2tpbmcgcGVyIHZpc2libGUgbGluZVxyXG4gIGZvciAoY29uc3QgdnIgb2Ygdmlldy52aXNpYmxlUmFuZ2VzKSB7XHJcbiAgICBsZXQgcG9zID0gdnIuZnJvbTtcclxuXHJcbiAgICB3aGlsZSAocG9zIDw9IHZyLnRvKSB7XHJcbiAgICAgIGNvbnN0IGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHBvcyk7XHJcblxyXG4gICAgICAvLyBzdG9wIGlmIHdlJ3ZlIG1vdmVkIHBhc3Qgdmlld3BvcnRcclxuICAgICAgaWYgKGxpbmUuZnJvbSA+IHZyLnRvKSBicmVhaztcclxuXHJcbiAgICAgIGNvbnN0IGV4Y2x1ZGVUaGlzTGluZSA9IHNldHRpbmdzLmV4Y2x1ZGVIZWFkZXJzICYmIGlzSGVhZGVyTGluZShsaW5lLnRleHQpO1xyXG5cclxuICAgICAgaWYgKCFleGNsdWRlVGhpc0xpbmUpIHtcclxuICAgICAgICAvLyBNYXNrIHRoZSB3aG9sZSBsaW5lIHRleHQgKG5vdCBpbmNsdWRpbmcgbmV3bGluZSlcclxuICAgICAgICBjb25zdCBsaW5lUmFuZ2U6IFJhbmdlID0geyBmcm9tOiBsaW5lLmZyb20sIHRvOiBsaW5lLnRvIH07XHJcblxyXG4gICAgICAgIC8vIFN1YnRyYWN0IHJldmVhbCByYW5nZXMgdGhhdCBvdmVybGFwIHRoaXMgbGluZVxyXG4gICAgICAgIGNvbnN0IHJldmVhbEluTGluZSA9IHJldmVhbFJhbmdlc1xyXG4gICAgICAgICAgLmZpbHRlcigocikgPT4gci50byA+IGxpbmVSYW5nZS5mcm9tICYmIHIuZnJvbSA8IGxpbmVSYW5nZS50bylcclxuICAgICAgICAgIC5tYXAoKHIpID0+ICh7XHJcbiAgICAgICAgICAgIGZyb206IE1hdGgubWF4KHIuZnJvbSwgbGluZVJhbmdlLmZyb20pLFxyXG4gICAgICAgICAgICB0bzogTWF0aC5taW4oci50bywgbGluZVJhbmdlLnRvKSxcclxuICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgY29uc3QgbWFza1NlZ21lbnRzID0gc3VidHJhY3RSYW5nZXMoW2xpbmVSYW5nZV0sIHJldmVhbEluTGluZSk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3Qgc2VnIG9mIG1hc2tTZWdtZW50cykge1xyXG4gICAgICAgICAgaWYgKHNlZy50byA8PSBzZWcuZnJvbSkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgY29uc3QgbGVuZ3RoID0gc2VnLnRvIC0gc2VnLmZyb207XHJcbiAgICAgICAgICBjb25zdCBjbHMgPVxyXG4gICAgICAgICAgICAgIHNldHRpbmdzLm1hc2tNb2RlID09PSBcImhpZGVcIiA/IFwicHJpdmFjeS1tYXNrLWhpZGVcIiA6XHJcbiAgICAgICAgICAgIHNldHRpbmdzLm1hc2tNb2RlID09PSBcInBhc3N3b3JkXCIgPyBcInByaXZhY3ktbWFzay1wYXNzd29yZFwiIDpcclxuICAgICAgICAgICAgXCJwcml2YWN5LW1hc2stYmx1clwiO1xyXG5cclxuICAgICAgICAgIGJ1aWxkZXIuYWRkKHNlZy5mcm9tLCBzZWcudG8sIERlY29yYXRpb24ubWFyayh7IGNsYXNzOiBjbHMgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gYWR2YW5jZSB0byBuZXh0IGxpbmVcclxuICAgICAgcG9zID0gbGluZS50byArIDE7XHJcbiAgICAgIGlmIChwb3MgPT09IGxpbmUuZnJvbSkgYnJlYWs7IC8vIHNhZmV0eVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGJ1aWxkZXIuZmluaXNoKCk7XHJcbn1cclxuIiwgImltcG9ydCB0eXBlIHsgRWRpdG9yU3RhdGUgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivc3RhdGVcIjtcclxuXHJcbmV4cG9ydCB0eXBlIFJhbmdlID0geyBmcm9tOiBudW1iZXI7IHRvOiBudW1iZXIgfTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZVJhbmdlcyhyYW5nZXM6IFJhbmdlW10pOiBSYW5nZVtdIHtcclxuICBjb25zdCBzb3J0ZWQgPSByYW5nZXNcclxuICAgIC5maWx0ZXIoKHIpID0+IHIudG8gPiByLmZyb20pXHJcbiAgICAuc2xpY2UoKVxyXG4gICAgLnNvcnQoKGEsIGIpID0+IGEuZnJvbSAtIGIuZnJvbSB8fCBhLnRvIC0gYi50byk7XHJcblxyXG4gIGNvbnN0IG1lcmdlZDogUmFuZ2VbXSA9IFtdO1xyXG4gIGZvciAoY29uc3QgciBvZiBzb3J0ZWQpIHtcclxuICAgIGNvbnN0IGxhc3QgPSBtZXJnZWRbbWVyZ2VkLmxlbmd0aCAtIDFdO1xyXG4gICAgaWYgKCFsYXN0IHx8IHIuZnJvbSA+IGxhc3QudG8pIG1lcmdlZC5wdXNoKHsgLi4uciB9KTtcclxuICAgIGVsc2UgbGFzdC50byA9IE1hdGgubWF4KGxhc3QudG8sIHIudG8pO1xyXG4gIH1cclxuICByZXR1cm4gbWVyZ2VkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3VidHJhY3RSYW5nZXMoYmFzZTogUmFuZ2VbXSwgc3VidHJhY3Q6IFJhbmdlW10pOiBSYW5nZVtdIHtcclxuICBjb25zdCBiID0gbWVyZ2VSYW5nZXMoYmFzZSk7XHJcbiAgY29uc3QgcyA9IG1lcmdlUmFuZ2VzKHN1YnRyYWN0KTtcclxuXHJcbiAgY29uc3Qgb3V0OiBSYW5nZVtdID0gW107XHJcbiAgZm9yIChjb25zdCBiciBvZiBiKSB7XHJcbiAgICBsZXQgY3Vyc29yID0gYnIuZnJvbTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IHNyIG9mIHMpIHtcclxuICAgICAgaWYgKHNyLnRvIDw9IGN1cnNvcikgY29udGludWU7XHJcbiAgICAgIGlmIChzci5mcm9tID49IGJyLnRvKSBicmVhaztcclxuXHJcbiAgICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5tYXgoY3Vyc29yLCBici5mcm9tKTtcclxuICAgICAgY29uc3QgZW5kID0gTWF0aC5taW4oc3IuZnJvbSwgYnIudG8pO1xyXG4gICAgICBpZiAoZW5kID4gc3RhcnQpIG91dC5wdXNoKHsgZnJvbTogc3RhcnQsIHRvOiBlbmQgfSk7XHJcblxyXG4gICAgICBjdXJzb3IgPSBNYXRoLm1heChjdXJzb3IsIHNyLnRvKTtcclxuICAgICAgaWYgKGN1cnNvciA+PSBici50bykgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGN1cnNvciA8IGJyLnRvKSBvdXQucHVzaCh7IGZyb206IGN1cnNvciwgdG86IGJyLnRvIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG91dDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVSZXZlYWxSYW5nZXMoXHJcbiAgc3RhdGU6IEVkaXRvclN0YXRlLFxyXG4gIHJldmVhbE1vZGU6IFwid29yZFwiIHwgXCJsZXR0ZXJcIlxyXG4pOiBSYW5nZVtdIHtcclxuICAvLyBVc2UgcHJpbWFyeSBjdXJzb3IgKGhlYWQpIGZvciBub3c7IGxhdGVyIHlvdSBjYW4gc3VwcG9ydCBtdWx0aS1jdXJzb3IuXHJcbiAgY29uc3QgcG9zID0gc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZDtcclxuXHJcbiAgaWYgKHJldmVhbE1vZGUgPT09IFwibGV0dGVyXCIpIHtcclxuICAgIC8vIFJldmVhbCBjaGFyYWN0ZXIgXCJ1bmRlclwiIGN1cnNvciBpZiBwb3NzaWJsZSwgZWxzZSBwcmV2aW91c1xyXG4gICAgaWYgKHBvcyA8IHN0YXRlLmRvYy5sZW5ndGgpIHJldHVybiBbeyBmcm9tOiBwb3MsIHRvOiBwb3MgKyAxIH1dO1xyXG4gICAgaWYgKHBvcyA+IDApIHJldHVybiBbeyBmcm9tOiBwb3MgLSAxLCB0bzogcG9zIH1dO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxuXHJcbiAgLy8gcmV2ZWFsTW9kZSA9PT0gXCJ3b3JkXCJcclxuICBjb25zdCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChwb3MpO1xyXG4gIGNvbnN0IGlkeCA9IHBvcyAtIGxpbmUuZnJvbTtcclxuXHJcbiAgY29uc3QgaXNXb3JkQ2hhciA9IChjaDogc3RyaW5nKSA9PiAvW0EtWmEtejAtOV9dLy50ZXN0KGNoKTtcclxuXHJcbiAgbGV0IGxlZnQgPSBpZHg7XHJcbiAgd2hpbGUgKGxlZnQgPiAwICYmIGlzV29yZENoYXIobGluZS50ZXh0LmNoYXJBdChsZWZ0IC0gMSkpKSBsZWZ0LS07XHJcblxyXG4gIGxldCByaWdodCA9IGlkeDtcclxuICB3aGlsZSAocmlnaHQgPCBsaW5lLnRleHQubGVuZ3RoICYmIGlzV29yZENoYXIobGluZS50ZXh0LmNoYXJBdChyaWdodCkpKSByaWdodCsrO1xyXG5cclxuICBpZiAocmlnaHQgPD0gbGVmdCkge1xyXG4gICAgLy8gTm8gd29yZCBjaGFyIGF0IGN1cnNvciBcdTIwMTQgcmV2ZWFsIG5vdGhpbmdcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcblxyXG4gIHJldHVybiBbeyBmcm9tOiBsaW5lLmZyb20gKyBsZWZ0LCB0bzogbGluZS5mcm9tICsgcmlnaHQgfV07XHJcbn1cclxuIiwgImV4cG9ydCBmdW5jdGlvbiBpc0hlYWRlckxpbmUobGluZVRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gIC8vIE1hcmtkb3duIGhlYWRlcjogdXAgdG8gMyBsZWFkaW5nIHNwYWNlcywgMS02ICMncywgdGhlbiBhIHNwYWNlXHJcbiAgcmV0dXJuIC9eXFxzezAsM30jezEsNn1cXHMvLnRlc3QobGluZVRleHQpO1xyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBK0I7OztBQ0EvQixzQkFBK0M7QUF1QnhDLElBQU0sbUJBQXFDO0FBQUEsRUFDakQsU0FBUztBQUFBLEVBQ1QsVUFBVTtBQUFBLEVBQ1YsWUFBWTtBQUFBLEVBQ1osZ0JBQWdCO0FBQUEsRUFDaEIsaUJBQWlCO0FBQ2xCO0FBRU8sSUFBTSxtQkFBTixjQUErQixpQ0FBaUI7QUFBQSxFQUd0RCxZQUFZLEtBQVUsUUFBa0I7QUFDdkMsVUFBTSxLQUFLLE1BQU07QUFDakIsU0FBSyxTQUFTO0FBQUEsRUFDZjtBQUFBLEVBRUQsVUFBZ0I7QUFDZixVQUFNLEVBQUUsWUFBWSxJQUFJO0FBQ3hCLGdCQUFZLE1BQU07QUFHbEIsUUFBSSx3QkFBUSxXQUFXLEVBQ3JCLFFBQVEsbUJBQW1CLEVBQzNCLFFBQVEsb0xBQW9MLEVBQzVMO0FBQUEsTUFBVSxDQUFDLFdBQ1gsT0FBTyxTQUFTLEtBQUssT0FBTyxTQUFTLE9BQU8sRUFBRSxTQUFTLE9BQU8sVUFBVTtBQUN2RSxhQUFLLE9BQU8sU0FBUyxVQUFVO0FBQy9CLGNBQU0sS0FB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
