/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  enabled: false,
  maskMode: "hide",
  revealMode: "word",
  excludeTitleLine: true,
  excludeFrontmatter: true,
  excludeHeaders: true,
  revealSelection: true,
  showNotices: true
};
var SampleSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Privacy Mode" });
    new import_obsidian.Setting(containerEl).setName("Privacy mode (global)").setDesc(
      "Turns masking on/off. You can also bind a hotkey to the Toggle privacy mode command."
    ).addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enabled).onChange(async (value) => {
        this.plugin.settings.enabled = value;
        await this.plugin.saveSettings();
        this.plugin.notifySettingsChanged();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Mask style").setDesc("Hide characters entirely, or show ***** in place of letters.").addDropdown((dd) => {
      dd.addOption("hide", "Hide (blank)");
      dd.addOption("asterisks", "Asterisks (***** )");
      dd.setValue(this.plugin.settings.maskMode);
      dd.onChange(async (value) => {
        this.plugin.settings.maskMode = value;
        await this.plugin.saveSettings();
        this.plugin.notifySettingsChanged();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Reveal at cursor").setDesc("What should remain visible at the cursor position.").addDropdown((dd) => {
      dd.addOption("word", "Current word");
      dd.addOption("letter", "Current letter");
      dd.addOption("none", "Nothing (full privacy)");
      dd.setValue(this.plugin.settings.revealMode);
      dd.onChange(async (value) => {
        this.plugin.settings.revealMode = value;
        await this.plugin.saveSettings();
        this.plugin.notifySettingsChanged();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Keep title line visible").setDesc("If your note starts with a markdown heading, keep that line visible.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.excludeTitleLine).onChange(async (value) => {
        this.plugin.settings.excludeTitleLine = value;
        await this.plugin.saveSettings();
        this.plugin.notifySettingsChanged();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Keep frontmatter visible").setDesc("Keep YAML frontmatter (--- ... ---) visible at the top of the note.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.excludeFrontmatter).onChange(async (value) => {
        this.plugin.settings.excludeFrontmatter = value;
        await this.plugin.saveSettings();
        this.plugin.notifySettingsChanged();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Exclude headers").setDesc("Keep Markdown headers (#, ##, ###, etc.) visible.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.excludeHeaders).onChange(async (value) => {
        this.plugin.settings.excludeHeaders = value;
        await this.plugin.saveSettings();
        this.plugin.notifySettingsChanged();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Reveal selected text").setDesc("If enabled, selected text becomes visible while selected.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.revealSelection).onChange(async (value) => {
        this.plugin.settings.revealSelection = value;
        await this.plugin.saveSettings();
        this.plugin.notifySettingsChanged();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Show notices").setDesc("Show a popup notice when toggling (useful while developing).").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.showNotices).onChange(async (value) => {
        this.plugin.settings.showNotices = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h3", { text: "Hotkey" });
    containerEl.createEl("p", {
      text: "Bind a hotkey to: Settings \u2192 Hotkeys \u2192 search \u201CToggle privacy mode\u201D. Obsidian keybinds commands rather than plugins hardcoding key combos."
    });
  }
};

// src/privacy/PrivacyController.ts
var import_obsidian2 = require("obsidian");
var import_state = require("@codemirror/state");

// src/privacy/cm6/PrivacyExtension.ts
var import_view3 = require("@codemirror/view");

// src/privacy/cm6/masking/buildMaskDecorations.ts
var import_view2 = require("@codemirror/view");

// src/privacy/cm6/masking/widgets.ts
var import_view = require("@codemirror/view");
var MaskWidget = class extends import_view.WidgetType {
  constructor(length, mode) {
    super();
    this.length = length;
    this.mode = mode;
  }
  eq(other) {
    return other.length === this.length && other.mode === this.mode;
  }
  toDOM() {
    const span = document.createElement("span");
    span.className = "privacy-mask-widget";
    if (this.mode === "asterisks") {
      span.textContent = "*".repeat(Math.min(this.length, 2e3));
    } else {
      span.textContent = " ".repeat(Math.min(this.length, 2e3));
    }
    return span;
  }
  ignoreEvent() {
    return false;
  }
};

// src/privacy/cm6/masking/ranges.ts
function mergeRanges(ranges) {
  const sorted = ranges.filter((r) => r.to > r.from).slice().sort((a, b) => a.from - b.from || a.to - b.to);
  const merged = [];
  for (const r of sorted) {
    const last = merged[merged.length - 1];
    if (!last || r.from > last.to) merged.push({ ...r });
    else last.to = Math.max(last.to, r.to);
  }
  return merged;
}
function subtractRanges(base, subtract) {
  const b = mergeRanges(base);
  const s = mergeRanges(subtract);
  const out = [];
  for (const br of b) {
    let cursor = br.from;
    for (const sr of s) {
      if (sr.to <= cursor) continue;
      if (sr.from >= br.to) break;
      const start = Math.max(cursor, br.from);
      const end = Math.min(sr.from, br.to);
      if (end > start) out.push({ from: start, to: end });
      cursor = Math.max(cursor, sr.to);
      if (cursor >= br.to) break;
    }
    if (cursor < br.to) out.push({ from: cursor, to: br.to });
  }
  return out;
}
function computeRevealRanges(state, revealMode) {
  if (revealMode === "none") return [];
  const pos = state.selection.main.head;
  if (revealMode === "letter") {
    if (pos < state.doc.length) return [{ from: pos, to: pos + 1 }];
    if (pos > 0) return [{ from: pos - 1, to: pos }];
    return [];
  }
  const line = state.doc.lineAt(pos);
  const idx = pos - line.from;
  const isWordChar = (ch) => /[A-Za-z0-9_]/.test(ch);
  let left = idx;
  while (left > 0 && isWordChar(line.text.charAt(left - 1))) left--;
  let right = idx;
  while (right < line.text.length && isWordChar(line.text.charAt(right))) right++;
  if (right <= left) {
    return [];
  }
  return [{ from: line.from + left, to: line.from + right }];
}

// src/privacy/cm6/masking/headers.ts
function isHeaderLine(lineText) {
  return /^\s{0,3}#{1,6}\s/.test(lineText);
}

// src/privacy/cm6/masking/exclusions.ts
function computeExcludedRanges(state, opts) {
  const out = [];
  if (opts.excludeFrontmatter) {
    out.push(...getFrontmatterRanges(state));
  }
  if (opts.excludeTitleLine) {
    const firstLine = state.doc.line(1);
    if (isHeaderLine(firstLine.text)) {
      out.push({ from: firstLine.from, to: firstLine.to });
    }
  }
  return out;
}
function getFrontmatterRanges(state) {
  const ranges = [];
  if (state.doc.lines < 2) return ranges;
  const first = state.doc.line(1).text.trim();
  if (first !== "---") return ranges;
  for (let lineNo = 2; lineNo <= state.doc.lines; lineNo++) {
    const line = state.doc.line(lineNo);
    const t = line.text.trim();
    if (t === "---" || t === "...") {
      const start = state.doc.line(1);
      ranges.push({ from: start.from, to: line.to });
      break;
    }
  }
  return ranges;
}

// src/privacy/cm6/masking/buildMaskDecorations.ts
function buildMaskDecorations(view, enabled, settings) {
  if (!enabled) return import_view2.Decoration.none;
  const builder = new class {
    constructor() {
      this.decos = [];
    }
    add(from, to, deco) {
      this.decos.push({ from, to, deco });
    }
    finish() {
      return import_view2.Decoration.set(this.decos.map((d) => d.deco.range(d.from, d.to)), true);
    }
  }();
  const state = view.state;
  const cursorReveal = computeRevealRanges(state, settings.revealMode);
  const selectionReveal = settings.revealSelection ? state.selection.ranges.filter((r) => !r.empty).map((r) => ({ from: Math.min(r.from, r.to), to: Math.max(r.from, r.to) })) : [];
  const excluded = computeExcludedRanges(state, {
    excludeFrontmatter: settings.excludeFrontmatter,
    excludeTitleLine: settings.excludeTitleLine
  });
  const revealRanges = mergeRanges([...cursorReveal, ...selectionReveal, ...excluded]);
  for (const vr of view.visibleRanges) {
    let pos = vr.from;
    while (pos <= vr.to) {
      const line = state.doc.lineAt(pos);
      if (line.from > vr.to) break;
      const excludeThisLine = settings.excludeHeaders && isHeaderLine(line.text);
      if (!excludeThisLine) {
        const lineRange = { from: line.from, to: line.to };
        const revealInLine = revealRanges.filter((r) => r.to > lineRange.from && r.from < lineRange.to).map((r) => ({
          from: Math.max(r.from, lineRange.from),
          to: Math.min(r.to, lineRange.to)
        }));
        const maskSegments = subtractRanges([lineRange], revealInLine);
        for (const seg of maskSegments) {
          if (seg.to <= seg.from) continue;
          const length = seg.to - seg.from;
          const deco = import_view2.Decoration.replace({
            widget: new MaskWidget(length, settings.maskMode),
            inclusive: false
          });
          builder.add(seg.from, seg.to, deco);
        }
      }
      pos = line.to + 1;
      if (pos === line.from) break;
    }
  }
  return builder.finish();
}

// src/privacy/cm6/PrivacyExtension.ts
function buildPrivacyExtension(args) {
  const { enabled, settings } = args;
  const plugin = import_view3.ViewPlugin.fromClass(
    class PrivacyMaskPlugin {
      constructor(view) {
        this.decorations = buildMaskDecorations(view, enabled, settings);
      }
      update(update) {
        if (!enabled) {
          this.decorations = import_view3.Decoration.none;
          return;
        }
        if (update.docChanged || update.selectionSet || update.viewportChanged) {
          this.decorations = buildMaskDecorations(update.view, enabled, settings);
        }
      }
    },
    {
      decorations: (v) => v.decorations
    }
  );
  const theme = import_view3.EditorView.baseTheme({
    ".privacy-mask-widget": {
      whiteSpace: "pre-wrap"
    }
  });
  return [plugin, theme];
}

// src/privacy/PrivacyController.ts
var PrivacyController = class {
  constructor(plugin) {
    this.compartment = new import_state.Compartment();
    this.plugin = plugin;
    this.enabled = plugin.settings.enabled;
    this.baseExtension = this.compartment.of(
      buildPrivacyExtension({
        enabled: this.enabled,
        settings: this.plugin.settings
      })
    );
    this.plugin.registerEditorExtension(this.baseExtension);
    const off1 = this.plugin.app.workspace.on("active-leaf-change", () => this.apply("settings-change"));
    const off2 = this.plugin.app.workspace.on("layout-change", () => this.apply("settings-change"));
    this.plugin.register(() => this.plugin.app.workspace.offref(off1));
    this.plugin.register(() => this.plugin.app.workspace.offref(off2));
  }
  dispose() {
  }
  syncFromSettings(opts) {
    this.enabled = this.plugin.settings.enabled;
    this.apply(opts.reason);
  }
  toggleEnabled() {
    this.setEnabled(!this.enabled);
  }
  setEnabled(next) {
    if (this.enabled === next) return;
    this.enabled = next;
    this.plugin.settings.enabled = next;
    void this.plugin.saveSettings();
    this.plugin.notify(`Privacy mode: ${next ? "ON" : "OFF"}`);
    this.apply("command");
  }
  onSettingsChanged() {
    this.apply("settings-change");
  }
  apply(_reason) {
    const ext = buildPrivacyExtension({
      enabled: this.enabled,
      settings: this.plugin.settings
    });
    const effect = this.compartment.reconfigure(ext);
    for (const view of this.getAllMarkdownEditorViews()) {
      const cm = this.getEditorView(view);
      if (!cm) continue;
      cm.dispatch({ effects: effect });
    }
  }
  *getAllMarkdownEditorViews() {
    const leaves = this.plugin.app.workspace.getLeavesOfType("markdown");
    for (const leaf of leaves) {
      const view = leaf.view;
      if (view instanceof import_obsidian2.MarkdownView) yield view;
    }
  }
  /**
   * Obsidian's Editor is wrapped; in CM6 it usually exposes `.cm` as EditorView.
   * This is the common plugin pattern.
   */
  getEditorView(view) {
    const editorAny = view.editor;
    const cm = editorAny == null ? void 0 : editorAny.cm;
    return cm != null ? cm : null;
  }
};

// src/main.ts
var MyPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    await this.loadSettings();
    this.privacy = new PrivacyController(this);
    this.addSettingTab(new SampleSettingTab(this.app, this));
    this.registerCommands();
    this.privacy.syncFromSettings({ reason: "startup" });
  }
  onunload() {
    var _a;
    (_a = this.privacy) == null ? void 0 : _a.dispose();
  }
  registerCommands() {
    this.addCommand({
      id: "toggle-privacy-mode",
      name: "Toggle privacy mode",
      callback: () => this.privacy.toggleEnabled()
    });
    this.addCommand({
      id: "enable-privacy-mode",
      name: "Enable privacy mode",
      callback: () => this.privacy.setEnabled(true)
    });
    this.addCommand({
      id: "disable-privacy-mode",
      name: "Disable privacy mode",
      callback: () => this.privacy.setEnabled(false)
    });
  }
  notifySettingsChanged() {
    this.privacy.onSettingsChanged();
  }
  notify(msg) {
    if (this.settings.showNotices) new import_obsidian3.Notice(msg);
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9wcml2YWN5L1ByaXZhY3lDb250cm9sbGVyLnRzIiwgInNyYy9wcml2YWN5L2NtNi9Qcml2YWN5RXh0ZW5zaW9uLnRzIiwgInNyYy9wcml2YWN5L2NtNi9tYXNraW5nL2J1aWxkTWFza0RlY29yYXRpb25zLnRzIiwgInNyYy9wcml2YWN5L2NtNi9tYXNraW5nL3dpZGdldHMudHMiLCAic3JjL3ByaXZhY3kvY202L21hc2tpbmcvcmFuZ2VzLnRzIiwgInNyYy9wcml2YWN5L2NtNi9tYXNraW5nL2hlYWRlcnMudHMiLCAic3JjL3ByaXZhY3kvY202L21hc2tpbmcvZXhjbHVzaW9ucy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MsIE15UGx1Z2luU2V0dGluZ3MsIFNhbXBsZVNldHRpbmdUYWIgfSBmcm9tIFwiLi9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgUHJpdmFjeUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9wcml2YWN5L1ByaXZhY3lDb250cm9sbGVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE15UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgc2V0dGluZ3MhOiBNeVBsdWdpblNldHRpbmdzO1xuICBwcml2YXRlIHByaXZhY3khOiBQcml2YWN5Q29udHJvbGxlcjtcblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIHRoaXMucHJpdmFjeSA9IG5ldyBQcml2YWN5Q29udHJvbGxlcih0aGlzKTtcblxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2FtcGxlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kcygpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBydW50aW1lIGZyb20gcGVyc2lzdGVkIHNldHRpbmdzXG4gICAgdGhpcy5wcml2YWN5LnN5bmNGcm9tU2V0dGluZ3MoeyByZWFzb246IFwic3RhcnR1cFwiIH0pO1xuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgdGhpcy5wcml2YWN5Py5kaXNwb3NlKCk7XG4gIH1cblxuICBwcml2YXRlIHJlZ2lzdGVyQ29tbWFuZHMoKSB7XG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcInRvZ2dsZS1wcml2YWN5LW1vZGVcIixcbiAgICAgIG5hbWU6IFwiVG9nZ2xlIHByaXZhY3kgbW9kZVwiLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMucHJpdmFjeS50b2dnbGVFbmFibGVkKCksXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwiZW5hYmxlLXByaXZhY3ktbW9kZVwiLFxuICAgICAgbmFtZTogXCJFbmFibGUgcHJpdmFjeSBtb2RlXCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5wcml2YWN5LnNldEVuYWJsZWQodHJ1ZSksXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwiZGlzYWJsZS1wcml2YWN5LW1vZGVcIixcbiAgICAgIG5hbWU6IFwiRGlzYWJsZSBwcml2YWN5IG1vZGVcIixcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnByaXZhY3kuc2V0RW5hYmxlZChmYWxzZSksXG4gICAgfSk7XG4gIH1cblxuICBub3RpZnlTZXR0aW5nc0NoYW5nZWQoKSB7XG4gICAgdGhpcy5wcml2YWN5Lm9uU2V0dGluZ3NDaGFuZ2VkKCk7XG4gIH1cblxuICBub3RpZnkobXNnOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5zaG93Tm90aWNlcykgbmV3IE5vdGljZShtc2cpO1xuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCAoYXdhaXQgdGhpcy5sb2FkRGF0YSgpKSBhcyBQYXJ0aWFsPE15UGx1Z2luU2V0dGluZ3M+KTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgTXlQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xuXG5leHBvcnQgdHlwZSBNYXNrTW9kZSA9IFwiaGlkZVwiIHwgXCJhc3Rlcmlza3NcIjtcbmV4cG9ydCB0eXBlIFJldmVhbE1vZGUgPSBcIndvcmRcIiB8IFwibGV0dGVyXCIgfCBcIm5vbmVcIjtcblxuZXhwb3J0IGludGVyZmFjZSBNeVBsdWdpblNldHRpbmdzIHtcblx0LyoqIFBlcnNpc3RlZCBnbG9iYWwgZGVmYXVsdCBzdGF0ZSAqL1xuXHRlbmFibGVkOiBib29sZWFuO1xuXG5cdC8qKiBIb3cgdG8gbWFzayBub24tcmV2ZWFsZWQgdGV4dCAqL1xuXHRtYXNrTW9kZTogTWFza01vZGU7XG5cblx0LyoqIFdoYXQgdG8gcmV2ZWFsIGF0IHRoZSBjdXJzb3IgKi9cblx0cmV2ZWFsTW9kZTogUmV2ZWFsTW9kZTtcblxuXHQvKiogS2VlcCB0aGUgbm90ZSB0aXRsZSBsaW5lIHZpc2libGUgKGZpcnN0IG1hcmtkb3duIGhlYWRpbmcgbGluZSkgKi9cblx0ZXhjbHVkZVRpdGxlTGluZTogYm9vbGVhbjtcblxuXHQvKiogS2VlcCBZQU1MIGZyb250bWF0dGVyIGJsb2NrIHZpc2libGUgKi9cblx0ZXhjbHVkZUZyb250bWF0dGVyOiBib29sZWFuO1xuXG5cdC8qKiBLZWVwIE1hcmtkb3duIGhlYWRlcnMgdmlzaWJsZSAoIywgIyMsIGV0Yy4pICovXG5cdGV4Y2x1ZGVIZWFkZXJzOiBib29sZWFuO1xuXG5cdC8qKiBJZiBlbmFibGVkLCBzZWxlY3Rpb24gYmVjb21lcyB2aXNpYmxlIHdoaWxlIHNlbGVjdGVkICovXG5cdHJldmVhbFNlbGVjdGlvbjogYm9vbGVhbjtcblxuXHQvKiogT3B0aW9uYWw6IHNob3cgYSBub3RpY2Ugd2hlbiB0b2dnbGluZyAoaGVscGZ1bCBkdXJpbmcgZGV2KSAqL1xuXHRzaG93Tm90aWNlczogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15UGx1Z2luU2V0dGluZ3MgPSB7XG5cdGVuYWJsZWQ6IGZhbHNlLFxuXHRtYXNrTW9kZTogXCJoaWRlXCIsXG5cdHJldmVhbE1vZGU6IFwid29yZFwiLFxuXHRleGNsdWRlVGl0bGVMaW5lOiB0cnVlLFxuXHRleGNsdWRlRnJvbnRtYXR0ZXI6IHRydWUsXG5cdGV4Y2x1ZGVIZWFkZXJzOiB0cnVlLFxuXHRyZXZlYWxTZWxlY3Rpb246IHRydWUsXG5cdHNob3dOb3RpY2VzOiB0cnVlLFxufTtcblxuZXhwb3J0IGNsYXNzIFNhbXBsZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBNeVBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeVBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiUHJpdmFjeSBNb2RlXCIgfSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiUHJpdmFjeSBtb2RlIChnbG9iYWwpXCIpXG5cdFx0XHQuc2V0RGVzYyhcblx0XHRcdFx0XCJUdXJucyBtYXNraW5nIG9uL29mZi4gWW91IGNhbiBhbHNvIGJpbmQgYSBob3RrZXkgdG8gdGhlIFRvZ2dsZSBwcml2YWN5IG1vZGUgY29tbWFuZC5cIlxuXHRcdFx0KVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlZCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlZCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLm5vdGlmeVNldHRpbmdzQ2hhbmdlZCgpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJNYXNrIHN0eWxlXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkhpZGUgY2hhcmFjdGVycyBlbnRpcmVseSwgb3Igc2hvdyAqKioqKiBpbiBwbGFjZSBvZiBsZXR0ZXJzLlwiKVxuXHRcdFx0LmFkZERyb3Bkb3duKChkZCkgPT4ge1xuXHRcdFx0XHRkZC5hZGRPcHRpb24oXCJoaWRlXCIsIFwiSGlkZSAoYmxhbmspXCIpO1xuXHRcdFx0XHRkZC5hZGRPcHRpb24oXCJhc3Rlcmlza3NcIiwgXCJBc3Rlcmlza3MgKCoqKioqIClcIik7XG5cdFx0XHRcdGRkLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1hc2tNb2RlKTtcblx0XHRcdFx0ZGQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubWFza01vZGUgPSB2YWx1ZSBhcyBNYXNrTW9kZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5ub3RpZnlTZXR0aW5nc0NoYW5nZWQoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJSZXZlYWwgYXQgY3Vyc29yXCIpXG5cdFx0XHQuc2V0RGVzYyhcIldoYXQgc2hvdWxkIHJlbWFpbiB2aXNpYmxlIGF0IHRoZSBjdXJzb3IgcG9zaXRpb24uXCIpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGRkKSA9PiB7XG5cdFx0XHRcdGRkLmFkZE9wdGlvbihcIndvcmRcIiwgXCJDdXJyZW50IHdvcmRcIik7XG5cdFx0XHRcdGRkLmFkZE9wdGlvbihcImxldHRlclwiLCBcIkN1cnJlbnQgbGV0dGVyXCIpO1xuXHRcdFx0XHRkZC5hZGRPcHRpb24oXCJub25lXCIsIFwiTm90aGluZyAoZnVsbCBwcml2YWN5KVwiKTtcblx0XHRcdFx0ZGQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2ZWFsTW9kZSk7XG5cdFx0XHRcdGRkLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJldmVhbE1vZGUgPSB2YWx1ZSBhcyBSZXZlYWxNb2RlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLm5vdGlmeVNldHRpbmdzQ2hhbmdlZCgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIktlZXAgdGl0bGUgbGluZSB2aXNpYmxlXCIpXG5cdFx0XHQuc2V0RGVzYyhcIklmIHlvdXIgbm90ZSBzdGFydHMgd2l0aCBhIG1hcmtkb3duIGhlYWRpbmcsIGtlZXAgdGhhdCBsaW5lIHZpc2libGUuXCIpXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5leGNsdWRlVGl0bGVMaW5lKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhjbHVkZVRpdGxlTGluZSA9IHZhbHVlO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0dGhpcy5wbHVnaW4ubm90aWZ5U2V0dGluZ3NDaGFuZ2VkKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIktlZXAgZnJvbnRtYXR0ZXIgdmlzaWJsZVwiKVxuXHRcdFx0LnNldERlc2MoXCJLZWVwIFlBTUwgZnJvbnRtYXR0ZXIgKC0tLSAuLi4gLS0tKSB2aXNpYmxlIGF0IHRoZSB0b3Agb2YgdGhlIG5vdGUuXCIpXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5leGNsdWRlRnJvbnRtYXR0ZXIpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5leGNsdWRlRnJvbnRtYXR0ZXIgPSB2YWx1ZTtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdHRoaXMucGx1Z2luLm5vdGlmeVNldHRpbmdzQ2hhbmdlZCgpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJFeGNsdWRlIGhlYWRlcnNcIilcblx0XHRcdC5zZXREZXNjKFwiS2VlcCBNYXJrZG93biBoZWFkZXJzICgjLCAjIywgIyMjLCBldGMuKSB2aXNpYmxlLlwiKVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUhlYWRlcnMpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVIZWFkZXJzID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4ubm90aWZ5U2V0dGluZ3NDaGFuZ2VkKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlJldmVhbCBzZWxlY3RlZCB0ZXh0XCIpXG5cdFx0XHQuc2V0RGVzYyhcIklmIGVuYWJsZWQsIHNlbGVjdGVkIHRleHQgYmVjb21lcyB2aXNpYmxlIHdoaWxlIHNlbGVjdGVkLlwiKVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2ZWFsU2VsZWN0aW9uKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZlYWxTZWxlY3Rpb24gPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5ub3RpZnlTZXR0aW5nc0NoYW5nZWQoKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiU2hvdyBub3RpY2VzXCIpXG5cdFx0XHQuc2V0RGVzYyhcIlNob3cgYSBwb3B1cCBub3RpY2Ugd2hlbiB0b2dnbGluZyAodXNlZnVsIHdoaWxlIGRldmVsb3BpbmcpLlwiKVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd05vdGljZXMpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dOb3RpY2VzID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0Ly8gTm8gbmVlZCB0byByZS1hcHBseSBtYXNraW5nIGp1c3QgYmVjYXVzZSBub3RpY2UgcHJlZmVyZW5jZSBjaGFuZ2VkLlxuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIkhvdGtleVwiIH0pO1xuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHR0ZXh0OlxuXHRcdFx0XHRcIkJpbmQgYSBob3RrZXkgdG86IFNldHRpbmdzIFx1MjE5MiBIb3RrZXlzIFx1MjE5MiBzZWFyY2ggXHUyMDFDVG9nZ2xlIHByaXZhY3kgbW9kZVx1MjAxRC4gXCIgK1xuXHRcdFx0XHRcIk9ic2lkaWFuIGtleWJpbmRzIGNvbW1hbmRzIHJhdGhlciB0aGFuIHBsdWdpbnMgaGFyZGNvZGluZyBrZXkgY29tYm9zLlwiLFxuXHRcdH0pO1xuXHR9XG59XG4iLCAiaW1wb3J0IHR5cGUgTXlQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcclxuaW1wb3J0IHsgTWFya2Rvd25WaWV3IH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IENvbXBhcnRtZW50LCB0eXBlIEV4dGVuc2lvbiB9IGZyb20gXCJAY29kZW1pcnJvci9zdGF0ZVwiO1xyXG5pbXBvcnQgdHlwZSB7IEVkaXRvclZpZXcgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xyXG5pbXBvcnQgeyBidWlsZFByaXZhY3lFeHRlbnNpb24gfSBmcm9tIFwiLi9jbTYvUHJpdmFjeUV4dGVuc2lvblwiO1xyXG5cclxudHlwZSBBcHBseVJlYXNvbiA9IFwic3RhcnR1cFwiIHwgXCJjb21tYW5kXCIgfCBcInNldHRpbmdzLWNoYW5nZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFByaXZhY3lDb250cm9sbGVyIHtcclxuICBwcml2YXRlIHBsdWdpbjogTXlQbHVnaW47XHJcblxyXG4gIHByaXZhdGUgZW5hYmxlZDogYm9vbGVhbjtcclxuXHJcbiAgcHJpdmF0ZSBjb21wYXJ0bWVudCA9IG5ldyBDb21wYXJ0bWVudCgpO1xyXG4gIHByaXZhdGUgYmFzZUV4dGVuc2lvbjogRXh0ZW5zaW9uO1xyXG5cclxuICBjb25zdHJ1Y3RvcihwbHVnaW46IE15UGx1Z2luKSB7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgIHRoaXMuZW5hYmxlZCA9IHBsdWdpbi5zZXR0aW5ncy5lbmFibGVkO1xyXG5cclxuICAgIC8vIFJlZ2lzdGVyIE9ORSBlZGl0b3IgZXh0ZW5zaW9uLCBhbmQgcmVjb25maWd1cmUgaXQgdmlhIGEgQ29tcGFydG1lbnQuXHJcbiAgICB0aGlzLmJhc2VFeHRlbnNpb24gPSB0aGlzLmNvbXBhcnRtZW50Lm9mKFxyXG4gICAgICBidWlsZFByaXZhY3lFeHRlbnNpb24oe1xyXG4gICAgICAgIGVuYWJsZWQ6IHRoaXMuZW5hYmxlZCxcclxuICAgICAgICBzZXR0aW5nczogdGhpcy5wbHVnaW4uc2V0dGluZ3MsXHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRWRpdG9yRXh0ZW5zaW9uKHRoaXMuYmFzZUV4dGVuc2lvbik7XHJcblxyXG4gICAgLy8gUmUtYXBwbHkgd2hlbiBzd2l0Y2hpbmcgcGFuZXMvbm90ZXNcclxuICAgIGNvbnN0IG9mZjEgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFwiYWN0aXZlLWxlYWYtY2hhbmdlXCIsICgpID0+IHRoaXMuYXBwbHkoXCJzZXR0aW5ncy1jaGFuZ2VcIikpO1xyXG4gICAgY29uc3Qgb2ZmMiA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXCJsYXlvdXQtY2hhbmdlXCIsICgpID0+IHRoaXMuYXBwbHkoXCJzZXR0aW5ncy1jaGFuZ2VcIikpO1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXIoKCkgPT4gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vZmZyZWYob2ZmMSkpO1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXIoKCkgPT4gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vZmZyZWYob2ZmMikpO1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIC8vIE9ic2lkaWFuIHdpbGwgY2xlYW4gdXAgcmVnaXN0ZXJlZCBlZGl0b3IgZXh0ZW5zaW9ucyBhdXRvbWF0aWNhbGx5LlxyXG4gICAgLy8gSWYgeW91IGxhdGVyIGFkZCBtYW51YWwgbGlzdGVuZXJzIGluIENNIGxhbmQsIGNsZWFuIHRoZW0gdGhlcmUuXHJcbiAgfVxyXG5cclxuICBzeW5jRnJvbVNldHRpbmdzKG9wdHM6IHsgcmVhc29uOiBBcHBseVJlYXNvbiB9KSB7XHJcbiAgICB0aGlzLmVuYWJsZWQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVkO1xyXG4gICAgdGhpcy5hcHBseShvcHRzLnJlYXNvbik7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVFbmFibGVkKCkge1xyXG4gICAgdGhpcy5zZXRFbmFibGVkKCF0aGlzLmVuYWJsZWQpO1xyXG4gIH1cclxuXHJcbiAgc2V0RW5hYmxlZChuZXh0OiBib29sZWFuKSB7XHJcbiAgICBpZiAodGhpcy5lbmFibGVkID09PSBuZXh0KSByZXR1cm47XHJcblxyXG4gICAgdGhpcy5lbmFibGVkID0gbmV4dDtcclxuICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZWQgPSBuZXh0O1xyXG4gICAgdm9pZCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5ub3RpZnkoYFByaXZhY3kgbW9kZTogJHtuZXh0ID8gXCJPTlwiIDogXCJPRkZcIn1gKTtcclxuICAgIHRoaXMuYXBwbHkoXCJjb21tYW5kXCIpO1xyXG4gIH1cclxuXHJcbiAgb25TZXR0aW5nc0NoYW5nZWQoKSB7XHJcbiAgICAvLyBTZXR0aW5ncyB0YWIgc2F2ZWQgc29tZXRoaW5nIFx1MjAxNCBwdXNoIHVwZGF0ZWQgY29uZmlnXHJcbiAgICB0aGlzLmFwcGx5KFwic2V0dGluZ3MtY2hhbmdlXCIpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhcHBseShfcmVhc29uOiBBcHBseVJlYXNvbikge1xyXG4gICAgLy8gUmVjb25maWd1cmUgZXZlcnkgYWN0aXZlIENNNiBlZGl0b3Igdmlld1xyXG4gICAgY29uc3QgZXh0ID0gYnVpbGRQcml2YWN5RXh0ZW5zaW9uKHtcclxuICAgICAgZW5hYmxlZDogdGhpcy5lbmFibGVkLFxyXG4gICAgICBzZXR0aW5nczogdGhpcy5wbHVnaW4uc2V0dGluZ3MsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBlZmZlY3QgPSB0aGlzLmNvbXBhcnRtZW50LnJlY29uZmlndXJlKGV4dCk7XHJcblxyXG4gICAgZm9yIChjb25zdCB2aWV3IG9mIHRoaXMuZ2V0QWxsTWFya2Rvd25FZGl0b3JWaWV3cygpKSB7XHJcbiAgICAgIGNvbnN0IGNtID0gdGhpcy5nZXRFZGl0b3JWaWV3KHZpZXcpO1xyXG4gICAgICBpZiAoIWNtKSBjb250aW51ZTtcclxuICAgICAgY20uZGlzcGF0Y2goeyBlZmZlY3RzOiBlZmZlY3QgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlICpnZXRBbGxNYXJrZG93bkVkaXRvclZpZXdzKCk6IEl0ZXJhYmxlPE1hcmtkb3duVmlldz4ge1xyXG4gICAgY29uc3QgbGVhdmVzID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJtYXJrZG93blwiKTtcclxuICAgIGZvciAoY29uc3QgbGVhZiBvZiBsZWF2ZXMpIHtcclxuICAgICAgY29uc3QgdmlldyA9IGxlYWYudmlldztcclxuICAgICAgaWYgKHZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpIHlpZWxkIHZpZXc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBPYnNpZGlhbidzIEVkaXRvciBpcyB3cmFwcGVkOyBpbiBDTTYgaXQgdXN1YWxseSBleHBvc2VzIGAuY21gIGFzIEVkaXRvclZpZXcuXHJcbiAgICogVGhpcyBpcyB0aGUgY29tbW9uIHBsdWdpbiBwYXR0ZXJuLlxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0RWRpdG9yVmlldyh2aWV3OiBNYXJrZG93blZpZXcpOiBFZGl0b3JWaWV3IHwgbnVsbCB7XHJcbiAgICBjb25zdCBlZGl0b3JBbnkgPSB2aWV3LmVkaXRvciBhcyBhbnk7XHJcbiAgICBjb25zdCBjbSA9IGVkaXRvckFueT8uY207XHJcbiAgICByZXR1cm4gY20gPz8gbnVsbDtcclxuICB9XHJcbn1cclxuIiwgImltcG9ydCB0eXBlIHsgRXh0ZW5zaW9uIH0gZnJvbSBcIkBjb2RlbWlycm9yL3N0YXRlXCI7XHJcbmltcG9ydCB7IEVkaXRvclZpZXcsIFZpZXdQbHVnaW4sIERlY29yYXRpb24sIHR5cGUgRGVjb3JhdGlvblNldCwgdHlwZSBWaWV3VXBkYXRlIH0gZnJvbSBcIkBjb2RlbWlycm9yL3ZpZXdcIjtcclxuaW1wb3J0IHR5cGUgeyBNeVBsdWdpblNldHRpbmdzIH0gZnJvbSBcIi4uLy4uL3NldHRpbmdzXCI7XHJcbmltcG9ydCB7IGJ1aWxkTWFza0RlY29yYXRpb25zIH0gZnJvbSBcIi4vbWFza2luZy9idWlsZE1hc2tEZWNvcmF0aW9uc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkUHJpdmFjeUV4dGVuc2lvbihhcmdzOiB7IGVuYWJsZWQ6IGJvb2xlYW47IHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzIH0pOiBFeHRlbnNpb24ge1xyXG4gIGNvbnN0IHsgZW5hYmxlZCwgc2V0dGluZ3MgfSA9IGFyZ3M7XHJcblxyXG4gIGNvbnN0IHBsdWdpbiA9IFZpZXdQbHVnaW4uZnJvbUNsYXNzKFxyXG4gICAgY2xhc3MgUHJpdmFjeU1hc2tQbHVnaW4ge1xyXG4gICAgICBkZWNvcmF0aW9uczogRGVjb3JhdGlvblNldDtcclxuXHJcbiAgICAgIGNvbnN0cnVjdG9yKHZpZXc6IEVkaXRvclZpZXcpIHtcclxuICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gYnVpbGRNYXNrRGVjb3JhdGlvbnModmlldywgZW5hYmxlZCwgc2V0dGluZ3MpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB1cGRhdGUodXBkYXRlOiBWaWV3VXBkYXRlKSB7XHJcbiAgICAgICAgLy8gSWYgZGlzYWJsZWQsIGtlZXAgZGVjb3JhdGlvbnMgZW1wdHkuXHJcbiAgICAgICAgaWYgKCFlbmFibGVkKSB7XHJcbiAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gRGVjb3JhdGlvbi5ub25lO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS5zZWxlY3Rpb25TZXQgfHwgdXBkYXRlLnZpZXdwb3J0Q2hhbmdlZCkge1xyXG4gICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IGJ1aWxkTWFza0RlY29yYXRpb25zKHVwZGF0ZS52aWV3LCBlbmFibGVkLCBzZXR0aW5ncyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBkZWNvcmF0aW9uczogKHYpID0+IHYuZGVjb3JhdGlvbnMsXHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgICBjb25zdCB0aGVtZSA9IEVkaXRvclZpZXcuYmFzZVRoZW1lKHtcclxuICAgIFwiLnByaXZhY3ktbWFzay13aWRnZXRcIjoge1xyXG4gICAgICAgIHdoaXRlU3BhY2U6IFwicHJlLXdyYXBcIixcclxuICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgcmV0dXJuIFtwbHVnaW4sIHRoZW1lXTtcclxufVxyXG4iLCAiaW1wb3J0IHR5cGUgeyBFZGl0b3JWaWV3IH0gZnJvbSBcIkBjb2RlbWlycm9yL3ZpZXdcIjtcclxuaW1wb3J0IHsgRGVjb3JhdGlvbiB9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCI7XHJcbmltcG9ydCB0eXBlIHsgTXlQbHVnaW5TZXR0aW5ncyB9IGZyb20gXCIuLi8uLi8uLi9zZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBNYXNrV2lkZ2V0IH0gZnJvbSBcIi4vd2lkZ2V0c1wiO1xyXG5pbXBvcnQgeyBjb21wdXRlUmV2ZWFsUmFuZ2VzLCBzdWJ0cmFjdFJhbmdlcywgbWVyZ2VSYW5nZXMsIHR5cGUgUmFuZ2UgfSBmcm9tIFwiLi9yYW5nZXNcIjtcclxuaW1wb3J0IHsgaXNIZWFkZXJMaW5lIH0gZnJvbSBcIi4vaGVhZGVyc1wiO1xyXG5pbXBvcnQgeyBjb21wdXRlRXhjbHVkZWRSYW5nZXMgfSBmcm9tIFwiLi9leGNsdXNpb25zXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRNYXNrRGVjb3JhdGlvbnModmlldzogRWRpdG9yVmlldywgZW5hYmxlZDogYm9vbGVhbiwgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3MpIHtcclxuICBpZiAoIWVuYWJsZWQpIHJldHVybiBEZWNvcmF0aW9uLm5vbmU7XHJcblxyXG4gIGNvbnN0IGJ1aWxkZXIgPSBuZXcgKGNsYXNzIHtcclxuICAgIGRlY29zOiB7IGZyb206IG51bWJlcjsgdG86IG51bWJlcjsgZGVjbzogYW55IH1bXSA9IFtdO1xyXG4gICAgYWRkKGZyb206IG51bWJlciwgdG86IG51bWJlciwgZGVjbzogYW55KSB7XHJcbiAgICAgIHRoaXMuZGVjb3MucHVzaCh7IGZyb20sIHRvLCBkZWNvIH0pO1xyXG4gICAgfVxyXG4gICAgZmluaXNoKCkge1xyXG4gICAgICAvLyBAY29kZW1pcnJvci92aWV3IGV4cGVjdHMgUmFuZ2U8RGVjb3JhdGlvbj47IE9ic2lkaWFuIGJ1bmRsZXMgUmFuZ2VTZXRCdWlsZGVyLFxyXG4gICAgICAvLyBidXQgYSBzaW1wbGUgYnVpbGQgd29ya3MgdmlhIERlY29yYXRpb24uc2V0KFsuLi5dKSB0b28uXHJcbiAgICAgIHJldHVybiBEZWNvcmF0aW9uLnNldCh0aGlzLmRlY29zLm1hcCgoZCkgPT4gZC5kZWNvLnJhbmdlKGQuZnJvbSwgZC50bykpLCB0cnVlKTtcclxuICAgIH1cclxuICB9KSgpO1xyXG5cclxuICBjb25zdCBzdGF0ZSA9IHZpZXcuc3RhdGU7XHJcblxyXG4gIC8vIDEpIENvbXB1dGUgcmV2ZWFsIHJhbmdlcyAoY3Vyc29yIGxldHRlci93b3JkL25vbmUpXHJcbiAgY29uc3QgY3Vyc29yUmV2ZWFsID0gY29tcHV0ZVJldmVhbFJhbmdlcyhzdGF0ZSwgc2V0dGluZ3MucmV2ZWFsTW9kZSk7XHJcblxyXG4gIC8vIDIpIENvbXB1dGUgc2VsZWN0aW9uIHJldmVhbCByYW5nZXMgKGlmIGVuYWJsZWQpXHJcbiAgY29uc3Qgc2VsZWN0aW9uUmV2ZWFsOiBSYW5nZVtdID0gc2V0dGluZ3MucmV2ZWFsU2VsZWN0aW9uXHJcbiAgICA/IHN0YXRlLnNlbGVjdGlvbi5yYW5nZXNcclxuICAgICAgICAuZmlsdGVyKChyKSA9PiAhci5lbXB0eSlcclxuICAgICAgICAubWFwKChyKSA9PiAoeyBmcm9tOiBNYXRoLm1pbihyLmZyb20sIHIudG8pLCB0bzogTWF0aC5tYXgoci5mcm9tLCByLnRvKSB9KSlcclxuICAgIDogW107XHJcblxyXG4gIGNvbnN0IGV4Y2x1ZGVkID0gY29tcHV0ZUV4Y2x1ZGVkUmFuZ2VzKHN0YXRlLCB7XHJcbiAgICBleGNsdWRlRnJvbnRtYXR0ZXI6IHNldHRpbmdzLmV4Y2x1ZGVGcm9udG1hdHRlcixcclxuICAgIGV4Y2x1ZGVUaXRsZUxpbmU6IHNldHRpbmdzLmV4Y2x1ZGVUaXRsZUxpbmUsXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHJldmVhbFJhbmdlcyA9IG1lcmdlUmFuZ2VzKFsuLi5jdXJzb3JSZXZlYWwsIC4uLnNlbGVjdGlvblJldmVhbCwgLi4uZXhjbHVkZWRdKTtcclxuXHJcbiAgLy8gMykgQnVpbGQgbWFza2luZyBwZXIgdmlzaWJsZSBsaW5lXHJcbiAgZm9yIChjb25zdCB2ciBvZiB2aWV3LnZpc2libGVSYW5nZXMpIHtcclxuICAgIGxldCBwb3MgPSB2ci5mcm9tO1xyXG5cclxuICAgIHdoaWxlIChwb3MgPD0gdnIudG8pIHtcclxuICAgICAgY29uc3QgbGluZSA9IHN0YXRlLmRvYy5saW5lQXQocG9zKTtcclxuXHJcbiAgICAgIC8vIHN0b3AgaWYgd2UndmUgbW92ZWQgcGFzdCB2aWV3cG9ydFxyXG4gICAgICBpZiAobGluZS5mcm9tID4gdnIudG8pIGJyZWFrO1xyXG5cclxuICAgICAgY29uc3QgZXhjbHVkZVRoaXNMaW5lID0gc2V0dGluZ3MuZXhjbHVkZUhlYWRlcnMgJiYgaXNIZWFkZXJMaW5lKGxpbmUudGV4dCk7XHJcblxyXG4gICAgICBpZiAoIWV4Y2x1ZGVUaGlzTGluZSkge1xyXG4gICAgICAgIC8vIE1hc2sgdGhlIHdob2xlIGxpbmUgdGV4dCAobm90IGluY2x1ZGluZyBuZXdsaW5lKVxyXG4gICAgICAgIGNvbnN0IGxpbmVSYW5nZTogUmFuZ2UgPSB7IGZyb206IGxpbmUuZnJvbSwgdG86IGxpbmUudG8gfTtcclxuXHJcbiAgICAgICAgLy8gU3VidHJhY3QgcmV2ZWFsIHJhbmdlcyB0aGF0IG92ZXJsYXAgdGhpcyBsaW5lXHJcbiAgICAgICAgY29uc3QgcmV2ZWFsSW5MaW5lID0gcmV2ZWFsUmFuZ2VzXHJcbiAgICAgICAgICAuZmlsdGVyKChyKSA9PiByLnRvID4gbGluZVJhbmdlLmZyb20gJiYgci5mcm9tIDwgbGluZVJhbmdlLnRvKVxyXG4gICAgICAgICAgLm1hcCgocikgPT4gKHtcclxuICAgICAgICAgICAgZnJvbTogTWF0aC5tYXgoci5mcm9tLCBsaW5lUmFuZ2UuZnJvbSksXHJcbiAgICAgICAgICAgIHRvOiBNYXRoLm1pbihyLnRvLCBsaW5lUmFuZ2UudG8pLFxyXG4gICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBjb25zdCBtYXNrU2VnbWVudHMgPSBzdWJ0cmFjdFJhbmdlcyhbbGluZVJhbmdlXSwgcmV2ZWFsSW5MaW5lKTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBzZWcgb2YgbWFza1NlZ21lbnRzKSB7XHJcbiAgICAgICAgICBpZiAoc2VnLnRvIDw9IHNlZy5mcm9tKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICBjb25zdCBsZW5ndGggPSBzZWcudG8gLSBzZWcuZnJvbTtcclxuICAgICAgICAgIGNvbnN0IGRlY28gPSBEZWNvcmF0aW9uLnJlcGxhY2Uoe1xyXG4gICAgICAgICAgICB3aWRnZXQ6IG5ldyBNYXNrV2lkZ2V0KGxlbmd0aCwgc2V0dGluZ3MubWFza01vZGUpLFxyXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBidWlsZGVyLmFkZChzZWcuZnJvbSwgc2VnLnRvLCBkZWNvKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGFkdmFuY2UgdG8gbmV4dCBsaW5lXHJcbiAgICAgIHBvcyA9IGxpbmUudG8gKyAxO1xyXG4gICAgICBpZiAocG9zID09PSBsaW5lLmZyb20pIGJyZWFrOyAvLyBzYWZldHlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBidWlsZGVyLmZpbmlzaCgpO1xyXG59XHJcbiIsICJpbXBvcnQgeyBXaWRnZXRUeXBlIH0gZnJvbSBcIkBjb2RlbWlycm9yL3ZpZXdcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNYXNrV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBsZW5ndGg6IG51bWJlciwgcHJpdmF0ZSBtb2RlOiBcImhpZGVcIiB8IFwiYXN0ZXJpc2tzXCIpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgfVxyXG5cclxuICBlcShvdGhlcjogTWFza1dpZGdldCkge1xyXG4gICAgcmV0dXJuIG90aGVyLmxlbmd0aCA9PT0gdGhpcy5sZW5ndGggJiYgb3RoZXIubW9kZSA9PT0gdGhpcy5tb2RlO1xyXG4gIH1cclxuXHJcbiAgdG9ET00oKSB7XHJcbiAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICBzcGFuLmNsYXNzTmFtZSA9IFwicHJpdmFjeS1tYXNrLXdpZGdldFwiO1xyXG5cclxuICAgIGlmICh0aGlzLm1vZGUgPT09IFwiYXN0ZXJpc2tzXCIpIHtcclxuICAgICAgLy8gT3B0aW9uIEE6IGNvbnN0YW50IFwiKioqKipcIlxyXG4gICAgICAvLyBzcGFuLnRleHRDb250ZW50ID0gXCIqKioqKlwiO1xyXG5cclxuICAgICAgLy8gT3B0aW9uIEIgKGJldHRlciBVWCk6IHNhbWUtbGVuZ3RoIG1hc2tpbmdcclxuICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IFwiKlwiLnJlcGVhdChNYXRoLm1pbih0aGlzLmxlbmd0aCwgMjAwMCkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gXCJoaWRlXCIgYnV0IHByZXNlcnZlIGxheW91dCB3aWR0aCBzb21ld2hhdCBieSByZXBsYWNpbmcgd2l0aCBzcGFjZXMuXHJcbiAgICAgIC8vIFRoaXMga2VlcHMgY3Vyc29yIGFsaWdubWVudCBtb3JlIHN0YWJsZSB0aGFuIGVtcHR5LlxyXG4gICAgICBzcGFuLnRleHRDb250ZW50ID0gXCIgXCIucmVwZWF0KE1hdGgubWluKHRoaXMubGVuZ3RoLCAyMDAwKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHNwYW47XHJcbiAgfVxyXG5cclxuICBpZ25vcmVFdmVudCgpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuIiwgImltcG9ydCB0eXBlIHsgRWRpdG9yU3RhdGUgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivc3RhdGVcIjtcclxuXHJcbmV4cG9ydCB0eXBlIFJhbmdlID0geyBmcm9tOiBudW1iZXI7IHRvOiBudW1iZXIgfTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZVJhbmdlcyhyYW5nZXM6IFJhbmdlW10pOiBSYW5nZVtdIHtcclxuICBjb25zdCBzb3J0ZWQgPSByYW5nZXNcclxuICAgIC5maWx0ZXIoKHIpID0+IHIudG8gPiByLmZyb20pXHJcbiAgICAuc2xpY2UoKVxyXG4gICAgLnNvcnQoKGEsIGIpID0+IGEuZnJvbSAtIGIuZnJvbSB8fCBhLnRvIC0gYi50byk7XHJcblxyXG4gIGNvbnN0IG1lcmdlZDogUmFuZ2VbXSA9IFtdO1xyXG4gIGZvciAoY29uc3QgciBvZiBzb3J0ZWQpIHtcclxuICAgIGNvbnN0IGxhc3QgPSBtZXJnZWRbbWVyZ2VkLmxlbmd0aCAtIDFdO1xyXG4gICAgaWYgKCFsYXN0IHx8IHIuZnJvbSA+IGxhc3QudG8pIG1lcmdlZC5wdXNoKHsgLi4uciB9KTtcclxuICAgIGVsc2UgbGFzdC50byA9IE1hdGgubWF4KGxhc3QudG8sIHIudG8pO1xyXG4gIH1cclxuICByZXR1cm4gbWVyZ2VkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3VidHJhY3RSYW5nZXMoYmFzZTogUmFuZ2VbXSwgc3VidHJhY3Q6IFJhbmdlW10pOiBSYW5nZVtdIHtcclxuICBjb25zdCBiID0gbWVyZ2VSYW5nZXMoYmFzZSk7XHJcbiAgY29uc3QgcyA9IG1lcmdlUmFuZ2VzKHN1YnRyYWN0KTtcclxuXHJcbiAgY29uc3Qgb3V0OiBSYW5nZVtdID0gW107XHJcbiAgZm9yIChjb25zdCBiciBvZiBiKSB7XHJcbiAgICBsZXQgY3Vyc29yID0gYnIuZnJvbTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IHNyIG9mIHMpIHtcclxuICAgICAgaWYgKHNyLnRvIDw9IGN1cnNvcikgY29udGludWU7XHJcbiAgICAgIGlmIChzci5mcm9tID49IGJyLnRvKSBicmVhaztcclxuXHJcbiAgICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5tYXgoY3Vyc29yLCBici5mcm9tKTtcclxuICAgICAgY29uc3QgZW5kID0gTWF0aC5taW4oc3IuZnJvbSwgYnIudG8pO1xyXG4gICAgICBpZiAoZW5kID4gc3RhcnQpIG91dC5wdXNoKHsgZnJvbTogc3RhcnQsIHRvOiBlbmQgfSk7XHJcblxyXG4gICAgICBjdXJzb3IgPSBNYXRoLm1heChjdXJzb3IsIHNyLnRvKTtcclxuICAgICAgaWYgKGN1cnNvciA+PSBici50bykgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGN1cnNvciA8IGJyLnRvKSBvdXQucHVzaCh7IGZyb206IGN1cnNvciwgdG86IGJyLnRvIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG91dDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVSZXZlYWxSYW5nZXMoc3RhdGU6IEVkaXRvclN0YXRlLCByZXZlYWxNb2RlOiBcIndvcmRcIiB8IFwibGV0dGVyXCIgfCBcIm5vbmVcIik6IFJhbmdlW10ge1xyXG4gIGlmIChyZXZlYWxNb2RlID09PSBcIm5vbmVcIikgcmV0dXJuIFtdO1xyXG5cclxuICAvLyBVc2UgcHJpbWFyeSBjdXJzb3IgKGhlYWQpIGZvciBub3c7IGxhdGVyIHlvdSBjYW4gc3VwcG9ydCBtdWx0aS1jdXJzb3IuXHJcbiAgY29uc3QgcG9zID0gc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZDtcclxuXHJcbiAgaWYgKHJldmVhbE1vZGUgPT09IFwibGV0dGVyXCIpIHtcclxuICAgIC8vIFJldmVhbCBjaGFyYWN0ZXIgXCJ1bmRlclwiIGN1cnNvciBpZiBwb3NzaWJsZSwgZWxzZSBwcmV2aW91c1xyXG4gICAgaWYgKHBvcyA8IHN0YXRlLmRvYy5sZW5ndGgpIHJldHVybiBbeyBmcm9tOiBwb3MsIHRvOiBwb3MgKyAxIH1dO1xyXG4gICAgaWYgKHBvcyA+IDApIHJldHVybiBbeyBmcm9tOiBwb3MgLSAxLCB0bzogcG9zIH1dO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxuXHJcbiAgLy8gcmV2ZWFsTW9kZSA9PT0gXCJ3b3JkXCJcclxuICBjb25zdCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChwb3MpO1xyXG4gIGNvbnN0IGlkeCA9IHBvcyAtIGxpbmUuZnJvbTtcclxuXHJcbiAgY29uc3QgaXNXb3JkQ2hhciA9IChjaDogc3RyaW5nKSA9PiAvW0EtWmEtejAtOV9dLy50ZXN0KGNoKTtcclxuXHJcbiAgbGV0IGxlZnQgPSBpZHg7XHJcbiAgd2hpbGUgKGxlZnQgPiAwICYmIGlzV29yZENoYXIobGluZS50ZXh0LmNoYXJBdChsZWZ0IC0gMSkpKSBsZWZ0LS07XHJcblxyXG4gIGxldCByaWdodCA9IGlkeDtcclxuICB3aGlsZSAocmlnaHQgPCBsaW5lLnRleHQubGVuZ3RoICYmIGlzV29yZENoYXIobGluZS50ZXh0LmNoYXJBdChyaWdodCkpKSByaWdodCsrO1xyXG5cclxuICBpZiAocmlnaHQgPD0gbGVmdCkge1xyXG4gICAgLy8gTm8gd29yZCBjaGFyIGF0IGN1cnNvciBcdTIwMTQgcmV2ZWFsIG5vdGhpbmdcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcblxyXG4gIHJldHVybiBbeyBmcm9tOiBsaW5lLmZyb20gKyBsZWZ0LCB0bzogbGluZS5mcm9tICsgcmlnaHQgfV07XHJcbn1cclxuIiwgImV4cG9ydCBmdW5jdGlvbiBpc0hlYWRlckxpbmUobGluZVRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gIC8vIE1hcmtkb3duIGhlYWRlcjogdXAgdG8gMyBsZWFkaW5nIHNwYWNlcywgMS02ICMncywgdGhlbiBhIHNwYWNlXHJcbiAgcmV0dXJuIC9eXFxzezAsM30jezEsNn1cXHMvLnRlc3QobGluZVRleHQpO1xyXG59XHJcbiIsICJpbXBvcnQgdHlwZSB7IEVkaXRvclN0YXRlIH0gZnJvbSBcIkBjb2RlbWlycm9yL3N0YXRlXCI7XHJcbmltcG9ydCB0eXBlIHsgUmFuZ2UgfSBmcm9tIFwiLi9yYW5nZXNcIjtcclxuaW1wb3J0IHsgaXNIZWFkZXJMaW5lIH0gZnJvbSBcIi4vaGVhZGVyc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVFeGNsdWRlZFJhbmdlcyhzdGF0ZTogRWRpdG9yU3RhdGUsIG9wdHM6IHsgZXhjbHVkZUZyb250bWF0dGVyOiBib29sZWFuOyBleGNsdWRlVGl0bGVMaW5lOiBib29sZWFuIH0pOiBSYW5nZVtdIHtcclxuICBjb25zdCBvdXQ6IFJhbmdlW10gPSBbXTtcclxuXHJcbiAgaWYgKG9wdHMuZXhjbHVkZUZyb250bWF0dGVyKSB7XHJcbiAgICBvdXQucHVzaCguLi5nZXRGcm9udG1hdHRlclJhbmdlcyhzdGF0ZSkpO1xyXG4gIH1cclxuXHJcbiAgaWYgKG9wdHMuZXhjbHVkZVRpdGxlTGluZSkge1xyXG4gICAgY29uc3QgZmlyc3RMaW5lID0gc3RhdGUuZG9jLmxpbmUoMSk7XHJcbiAgICBpZiAoaXNIZWFkZXJMaW5lKGZpcnN0TGluZS50ZXh0KSkge1xyXG4gICAgICBvdXQucHVzaCh7IGZyb206IGZpcnN0TGluZS5mcm9tLCB0bzogZmlyc3RMaW5lLnRvIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG91dDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RnJvbnRtYXR0ZXJSYW5nZXMoc3RhdGU6IEVkaXRvclN0YXRlKTogUmFuZ2VbXSB7XHJcbiAgY29uc3QgcmFuZ2VzOiBSYW5nZVtdID0gW107XHJcblxyXG4gIGlmIChzdGF0ZS5kb2MubGluZXMgPCAyKSByZXR1cm4gcmFuZ2VzO1xyXG5cclxuICBjb25zdCBmaXJzdCA9IHN0YXRlLmRvYy5saW5lKDEpLnRleHQudHJpbSgpO1xyXG4gIGlmIChmaXJzdCAhPT0gXCItLS1cIikgcmV0dXJuIHJhbmdlcztcclxuXHJcbiAgLy8gRnJvbnRtYXR0ZXIgc3RhcnRzIGF0IGxpbmUgMSwgZW5kcyBhdCBuZXh0IGxpbmUgdGhhdCdzIGV4YWN0bHkgLS0tIG9yIC4uLlxyXG4gIGZvciAobGV0IGxpbmVObyA9IDI7IGxpbmVObyA8PSBzdGF0ZS5kb2MubGluZXM7IGxpbmVObysrKSB7XHJcbiAgICBjb25zdCBsaW5lID0gc3RhdGUuZG9jLmxpbmUobGluZU5vKTtcclxuICAgIGNvbnN0IHQgPSBsaW5lLnRleHQudHJpbSgpO1xyXG4gICAgaWYgKHQgPT09IFwiLS0tXCIgfHwgdCA9PT0gXCIuLi5cIikge1xyXG4gICAgICAvLyBJbmNsdWRlIGJvdGggZGVsaW1pdGVyIGxpbmVzXHJcbiAgICAgIGNvbnN0IHN0YXJ0ID0gc3RhdGUuZG9jLmxpbmUoMSk7XHJcbiAgICAgIHJhbmdlcy5wdXNoKHsgZnJvbTogc3RhcnQuZnJvbSwgdG86IGxpbmUudG8gfSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJhbmdlcztcclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQStCOzs7QUNBL0Isc0JBQStDO0FBZ0N4QyxJQUFNLG1CQUFxQztBQUFBLEVBQ2pELFNBQVM7QUFBQSxFQUNULFVBQVU7QUFBQSxFQUNWLFlBQVk7QUFBQSxFQUNaLGtCQUFrQjtBQUFBLEVBQ2xCLG9CQUFvQjtBQUFBLEVBQ3BCLGdCQUFnQjtBQUFBLEVBQ2hCLGlCQUFpQjtBQUFBLEVBQ2pCLGFBQWE7QUFDZDtBQUVPLElBQU0sbUJBQU4sY0FBK0IsaUNBQWlCO0FBQUEsRUFHdEQsWUFBWSxLQUFVLFFBQWtCO0FBQ3ZDLFVBQU0sS0FBSyxNQUFNO0FBQ2pCLFNBQUssU0FBUztBQUFBLEVBQ2Y7QUFBQSxFQUVBLFVBQWdCO0FBQ2YsVUFBTSxFQUFFLFlBQVksSUFBSTtBQUN4QixnQkFBWSxNQUFNO0FBRWxCLGdCQUFZLFNBQVMsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRW5ELFFBQUksd0JBQVEsV0FBVyxFQUNyQixRQUFRLHVCQUF1QixFQUMvQjtBQUFBLE1BQ0E7QUFBQSxJQUNELEVBQ0M7QUFBQSxNQUFVLENBQUMsV0FDWCxPQUFPLFNBQVMsS0FBSyxPQUFPLFNBQVMsT0FBTyxFQUFFLFNBQVMsT0FBTyxVQUFVO0FBQ3ZFLGFBQUssT0FBTyxTQUFTLFVBQVU7QUFDL0IsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUMvQixhQUFLLE9BQU8sc0JBQXNCO0FBQUEsTUFDbkMsQ0FBQztBQUFBLElBQ0Y7QUFFRCxRQUFJLHdCQUFRLFdBQVcsRUFDckIsUUFBUSxZQUFZLEVBQ3BCLFFBQVEsOERBQThELEVBQ3RFLFlBQVksQ0FBQyxPQUFPO0FBQ3BCLFNBQUcsVUFBVSxRQUFR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QztBQUFBLEVBQ0Y7QUFBQSxFQUVBLENBQVMsNEJBQW9EO0FBQzNELFVBQU0sU0FBUyxLQUFLLE9BQU8sSUFBSSxVQUFVLGdCQUFnQixVQUFVO0FBQ25FLGVBQVcsUUFBUSxRQUFRO0FBQ3pCLFlBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQUksZ0JBQWdCLDhCQUFjLE9BQU07QUFBQSxJQUMxQztBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTVEsY0FBYyxNQUF1QztBQUMzRCxVQUFNLFlBQVksS0FBSztBQUN2QixVQUFNLEtBQUssdUNBQVc7QUFDdEIsV0FBTyxrQkFBTTtBQUFBLEVBQ2Y7QUFDRjs7O0FGaEdBLElBQXFCLFdBQXJCLGNBQXNDLHdCQUFPO0FBQUEsRUFJM0MsTUFBTSxTQUFTO0FBQ2IsVUFBTSxLQUFLLGFBQWE7QUFFeEIsU0FBSyxVQUFVLElBQUksa0JBQWtCLElBQUk7QUFFekMsU0FBSyxjQUFjLElBQUksaUJBQWlCLEtBQUssS0FBSyxJQUFJLENBQUM7QUFDdkQsU0FBSyxpQkFBaUI7QUFHdEIsU0FBSyxRQUFRLGlCQUFpQixFQUFFLFFBQVEsVUFBVSxDQUFDO0FBQUEsRUFDckQ7QUFBQSxFQUVBLFdBQVc7QUFwQmI7QUFxQkksZUFBSyxZQUFMLG1CQUFjO0FBQUEsRUFDaEI7QUFBQSxFQUVRLG1CQUFtQjtBQUN6QixTQUFLLFdBQVc7QUFBQSxNQUNkLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTSxLQUFLLFFBQVEsY0FBYztBQUFBLElBQzdDLENBQUM7QUFFRCxTQUFLLFdBQVc7QUFBQSxNQUNkLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTSxLQUFLLFFBQVEsV0FBVyxJQUFJO0FBQUEsSUFDOUMsQ0FBQztBQUVELFNBQUssV0FBVztBQUFBLE1BQ2QsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNLEtBQUssUUFBUSxXQUFXLEtBQUs7QUFBQSxJQUMvQyxDQUFDO0FBQUEsRUFDSDtBQUFBLEVBRUEsd0JBQXdCO0FBQ3RCLFNBQUssUUFBUSxrQkFBa0I7QUFBQSxFQUNqQztBQUFBLEVBRUEsT0FBTyxLQUFhO0FBQ2xCLFFBQUksS0FBSyxTQUFTLFlBQWEsS0FBSSx3QkFBTyxHQUFHO0FBQUEsRUFDL0M7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNuQixTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBbUIsTUFBTSxLQUFLLFNBQVMsQ0FBK0I7QUFBQSxFQUMxRztBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ25CLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ25DO0FBQ0Y7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X3ZpZXciLCAiaW1wb3J0X3ZpZXciXQp9Cg==
